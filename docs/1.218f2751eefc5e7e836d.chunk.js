webpackJsonp([1],{"+VeI":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4"),i=n("pHuv"),o=n("F1yO"),l=n("PKQO"),a=n("xfHL");n("VzZx");var s;t.RepoManager=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return s||(s=new e),s},e.prototype.interrupt=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].interrupt()},e.prototype.resume=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].resume()},e.prototype.databaseFromApp=function(e,t){var n=t||e.options.databaseURL;void 0===n&&o.fatal("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.intializeApp().");var r=l.parseRepoInfo(n),i=r.repoInfo;return a.validateUrl("Invalid Firebase Database URL",1,r),r.path.isEmpty()||o.fatal("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,e).database},e.prototype.deleteRepo=function(e){var t=r.safeGet(this.repos_,e.app.name);t&&r.safeGet(t,e.repoInfo_.toURLString())===e||o.fatal("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},e.prototype.createRepo=function(e,t){var n=r.safeGet(this.repos_,t.name);n||(this.repos_[t.name]=n={});var l=r.safeGet(n,e.toURLString());return l&&o.fatal("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new i.Repo(e,this.useRestClient_,t),n[e.toURLString()]=l,l},e.prototype.forceRestClient=function(e){this.useRestClient_=e},e}()},"/0OS":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4"),i=n("ertD"),o=n("JEJ4");t.ChildChangeAccumulator=function(){function e(){this.changeMap_={}}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;o.assert(t==i.Change.CHILD_ADDED||t==i.Change.CHILD_CHANGED||t==i.Change.CHILD_REMOVED,"Only child changes supported for tracking"),o.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var l=r.safeGet(this.changeMap_,n);if(l){var a=l.type;if(t==i.Change.CHILD_ADDED&&a==i.Change.CHILD_REMOVED)this.changeMap_[n]=i.Change.childChangedChange(n,e.snapshotNode,l.snapshotNode);else if(t==i.Change.CHILD_REMOVED&&a==i.Change.CHILD_ADDED)delete this.changeMap_[n];else if(t==i.Change.CHILD_REMOVED&&a==i.Change.CHILD_CHANGED)this.changeMap_[n]=i.Change.childRemovedChange(n,l.oldSnap);else if(t==i.Change.CHILD_CHANGED&&a==i.Change.CHILD_ADDED)this.changeMap_[n]=i.Change.childAddedChange(n,e.snapshotNode);else{if(t!=i.Change.CHILD_CHANGED||a!=i.Change.CHILD_CHANGED)throw o.assertionError("Illegal combination of changes: "+e+" occurred after "+l);this.changeMap_[n]=i.Change.childChangedChange(n,e.snapshotNode,l.oldSnap)}}else this.changeMap_[n]=e},e.prototype.getChanges=function(){return r.getValues(this.changeMap_)},e}()},"/68J":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("gOHv"),i=n("kCHx"),o=n("fvGz"),l=n("JEJ4");t.Merge=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=r.OperationType.MERGE}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new o.Path(t));return n.isEmpty()?null:n.value?new i.Overwrite(this.source,o.Path.Empty,n.value):new e(this.source,o.Path.Empty,n)}return l.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,this.path.popFront(),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}()},"/HC2":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4"),i=n("JEJ4");t.StatsCollection=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),i.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return r.deepCopy(this.counters_)},e}()},"/fob":function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i,o,l=n("GboV"),a=n("F1yO"),s=n("p+VM"),u=n("04zk");t.setNodeFromJSON=function(e){i=e},t.setMaxNode=function(e){o=e};var c=function(e){r(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}return t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?a.nameCompare(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return s.NamedNode.MIN},t.prototype.maxPost=function(){return new s.NamedNode(a.MAX_NAME,new u.LeafNode("[PRIORITY-POST]",o))},t.prototype.makePost=function(e,t){var n=i(e);return new s.NamedNode(t,new u.LeafNode("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(l.Index);t.PriorityIndex=c,t.PRIORITY_INDEX=new c},"04zk":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("JEJ4"),o=n("F1yO"),l=n("3FiG");t.LeafNode=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,i.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),l.validatePriorityNode(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return r},set:function(e){r=e},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=t.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(i.assert(".priority"!==r||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+l.priorityHashText(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?o.doubleToIEEE754String(this.value_):this.value_,this.lazyHash_=o.sha1(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(i.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(n),l=e.VALUE_TYPE_ORDER.indexOf(r);return i.assert(o>=0,"Unknown leaf type: "+n),i.assert(l>=0,"Unknown leaf type: "+r),o===l?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-o},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){return e===this||!!e.isLeafNode()&&this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}()},"0hmO":function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n("JEJ4"),o=n("YY8E"),l=n("JEJ4");t.OnlineMonitor=function(e){r(t,e);function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||"undefined"==typeof window.addEventListener||l.isMobileCordova()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return i.assert("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(o.EventEmitter)},"0npo":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("W4Cj"),i=n("KH1l"),o=n("R3TC"),l=n("y8hQ"),a=n("bN85"),s=n("9kU/"),u=n("JEJ4"),c=n("gOHv"),h=n("ertD"),d=n("/fob");t.View=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),u=new r.IndexedFilter(n.getIndex()),c=n.getNodeFilter();this.processor_=new i.ViewProcessor(c);var h=t.getServerCache(),d=t.getEventCache(),p=u.updateFullNode(o.ChildrenNode.EMPTY_NODE,h.getNode(),null),_=c.updateFullNode(o.ChildrenNode.EMPTY_NODE,d.getNode(),null),f=new l.CacheNode(p,h.isFullyInitialized(),u.filtersNodes()),y=new l.CacheNode(_,d.isFullyInitialized(),c.filtersNodes());this.viewCache_=new a.ViewCache(y,f),this.eventGenerator_=new s.EventGenerator(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},e.prototype.removeEventRegistration=function(e,t){var n=[];if(t){u.assert(null==e,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(e){var i=e.createCancelEvent(t=t,r);i&&n.push(i)})}if(e){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var l=this.eventRegistrations_[o];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(l)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},e.prototype.applyOperation=function(e,t,n){e.type===c.OperationType.MERGE&&null!==e.source.queryId&&(u.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),u.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(i.viewCache),u.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(d.PRIORITY_INDEX,function(e,t){n.push(h.Change.childAddedChange(e,t))}),t.isFullyInitialized()&&n.push(h.Change.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},e.prototype.generateEventsForChanges_=function(e,t,n){return this.eventGenerator_.generateEventsForChanges(e,t,n?[n]:this.eventRegistrations_)},e}()},"1WNV":function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:l}catch(e){r=l}}();function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}var s,u=[],c=!1,h=-1;function d(){c&&s&&(c=!1,s.length?u=s.concat(u):h=-1,u.length&&p())}function p(){if(!c){var e=a(d);c=!0;for(var t=u.length;t;){for(s=u,u=[];++h<t;)s&&s[h].run();h=-1,t=u.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===l||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new _(e,t)),1!==u.length||c||a(p)};function _(e,t){this.fun=e,this.array=t}_.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function f(){}i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"1zSO":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4");t.DOMStorageWrapper=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),r.stringify(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:r.jsonEval(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}()},"2BLv":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("isNy"),i=n("isNy"),o=Math.log(2),l=function(){function e(e){this.count=(t=e+1,parseInt(Math.log(t)/o,10));var t;this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}();t.buildChildSet=function(e,t,n,o){e.sort(t);var a=function(t,i){var o,l,s=i-t;if(0==s)return null;if(1==s)return o=e[t],l=n?n(o):o,new r.LLRBNode(l,o.node,r.LLRBNode.BLACK,null,null);var u=parseInt(s/2,10)+t,c=a(t,u),h=a(u+1,i);return o=e[u],l=n?n(o):o,new r.LLRBNode(l,o.node,r.LLRBNode.BLACK,c,h)},s=function(t){for(var i=null,o=null,l=e.length,s=function(t,i){var o=l-t,s=l;l-=t;var c=a(o+1,s),h=e[o],d=n?n(h):h;u(new r.LLRBNode(d,h.node,i,null,c))},u=function(e){i?(i.left=e,i=e):(o=e,i=e)},c=0;c<t.count;++c){var h=t.nextBitIsOne(),d=Math.pow(2,t.count-(c+1));h?s(d,r.LLRBNode.BLACK):(s(d,r.LLRBNode.BLACK),s(d,r.LLRBNode.RED))}return o}(new l(e.length));return new i.SortedMap(o||t,s)}},"2kNe":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("dVae"),i=n("fvGz"),o=n("JEJ4"),l=n("p+VM"),a=n("/fob"),s=n("JEJ4");t.CompoundWrite=function(){function e(e){this.writeTree_=e}return e.prototype.addWrite=function(t,n){if(t.isEmpty())return new e(new r.ImmutableTree(n));var o=this.writeTree_.findRootMostValueAndPath(t);if(null!=o){var l=o.path,a=o.value,s=i.Path.relativePath(l,t);return a=a.updateChild(s,n),new e(this.writeTree_.set(l,a))}var u=new r.ImmutableTree(n);return new e(this.writeTree_.setTree(t,u))},e.prototype.addWrites=function(e,t){var n=this;return o.forEach(t,function(t,r){n=n.addWrite(e.child(t),r)}),n},e.prototype.removeWrite=function(t){return t.isEmpty()?e.Empty:new e(this.writeTree_.setTree(t,r.ImmutableTree.Empty))},e.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},e.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(i.Path.relativePath(t.path,e)):null},e.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(a.PRIORITY_INDEX,function(t,n){e.push(new l.NamedNode(t,n))}):this.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new l.NamedNode(t,n.value))}),e},e.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var n=this.getCompleteNode(t);return new e(null!=n?new r.ImmutableTree(n):this.writeTree_.subtree(t))},e.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},e.prototype.apply=function(t){return e.applySubtreeWrite_(i.Path.Empty,this.writeTree_,t)},e.Empty=new e(new r.ImmutableTree(null)),e.applySubtreeWrite_=function(t,n,r){if(null!=n.value)return r.updateChild(t,n.value);var i=null;return n.children.inorderTraversal(function(n,o){".priority"===n?(s.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=e.applySubtreeWrite_(t.child(n),o,r)}),r.getChild(t).isEmpty()||null===i||(r=r.updateChild(t.child(".priority"),i)),r},e}()},"3FiG":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("JEJ4"),o=n("F1yO"),l=n("JEJ4");t.setMaxNode=function(e){r=e},t.priorityHashText=function(e){return"number"==typeof e?"number:"+o.doubleToIEEE754String(e):"string:"+e},t.validatePriorityNode=function(e){if(e.isLeafNode()){var t=e.val();i.assert("string"==typeof t||"number"==typeof t||"object"==typeof t&&l.contains(t,".sv"),"Priority must be a string or number.")}else i.assert(e===r||e.isEmpty(),"priority of unexpected type.");i.assert(e===r||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}},"43Go":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("R3TC"),i=n("04zk"),o=n("p+VM"),l=n("JEJ4"),a=n("JEJ4"),s=n("2BLv"),u=n("zFzr"),c=n("b5Wm"),h=n("/fob"),d=!0;function p(e,t){if(void 0===t&&(t=null),null===e)return r.ChildrenNode.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),a.assert(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new i.LeafNode(e,p(t));if(e instanceof Array||!d){var n=r.ChildrenNode.EMPTY_NODE,_=e;return l.forEach(_,function(e,t){if(l.contains(_,e)&&"."!==e.substring(0,1)){var r=p(t);!r.isLeafNode()&&r.isEmpty()||(n=n.updateImmediateChild(e,r))}}),n.updatePriority(p(t))}var f=[],y=!1,v=e;if(l.forEach(v,function(e,t){if("string"!=typeof e||"."!==e.substring(0,1)){var n=p(v[e]);n.isEmpty()||(y=y||!n.getPriority().isEmpty(),f.push(new o.NamedNode(e,n)))}}),0==f.length)return r.ChildrenNode.EMPTY_NODE;var g=s.buildChildSet(f,u.NAME_ONLY_COMPARATOR,function(e){return e.name},u.NAME_COMPARATOR);if(y){var m=s.buildChildSet(f,h.PRIORITY_INDEX.getCompare());return new r.ChildrenNode(g,p(t),new c.IndexMap({".priority":m},{".priority":h.PRIORITY_INDEX}))}return new r.ChildrenNode(g,p(t),c.IndexMap.Default)}t.nodeFromJSON=p,h.setNodeFromJSON(p)},"5pXs":function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n("oyal"),o=n("EAgh"),l=n("F1yO"),a=n("sZ8A"),s=n("rB9K"),u=n("pHuv"),c=n("fvGz"),h=n("miEe"),d=n("xfHL"),p=n("JEJ4"),_=n("JEJ4"),f=n("uCc5"),y=function(e){r(t,e);function t(t,n){if(!(t instanceof u.Repo))throw new Error("new Reference() no longer supported - use app.database().");return e.call(this,t,n,h.QueryParams.DEFAULT,!1)||this}return t.prototype.getKey=function(){return p.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(e){return p.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof c.Path||(null===this.path.getFront()?d.validateRootPathString("Reference.child",1,e,!1):d.validatePathString("Reference.child",1,e,!1)),new t(this.repo,this.path.child(e))},t.prototype.getParent=function(){p.validateArgCount("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){p.validateArgCount("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(e,t){p.validateArgCount("Reference.set",1,2,arguments.length),d.validateWritablePath("Reference.set",this.path),d.validateFirebaseDataArg("Reference.set",1,e,this.path,!1),p.validateCallback("Reference.set",2,t,!0);var n=new _.Deferred;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(p.validateArgCount("Reference.update",1,2,arguments.length),d.validateWritablePath("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,l.warn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}d.validateFirebaseMergeDataArg("Reference.update",1,e,this.path,!1),p.validateCallback("Reference.update",2,t,!0);var i=new _.Deferred;return this.repo.update(this.path,e,i.wrapCallback(t)),i.promise},t.prototype.setWithPriority=function(e,t,n){if(p.validateArgCount("Reference.setWithPriority",2,3,arguments.length),d.validateWritablePath("Reference.setWithPriority",this.path),d.validateFirebaseDataArg("Reference.setWithPriority",1,e,this.path,!1),d.validatePriority("Reference.setWithPriority",2,t,!1),p.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new _.Deferred;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return p.validateArgCount("Reference.remove",0,1,arguments.length),d.validateWritablePath("Reference.remove",this.path),p.validateCallback("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if(p.validateArgCount("Reference.transaction",1,3,arguments.length),d.validateWritablePath("Reference.transaction",this.path),p.validateCallback("Reference.transaction",1,e,!1),p.validateCallback("Reference.transaction",2,t,!0),d.validateBoolean("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new _.Deferred;return"function"==typeof t&&r.promise.catch(function(){}),this.repo.startTransaction(this.path,e,function(e,n,i){e?r.reject(e):r.resolve(new o.TransactionResult(n,i)),"function"==typeof t&&t(e,n,i)},n),r.promise},t.prototype.setPriority=function(e,t){p.validateArgCount("Reference.setPriority",1,2,arguments.length),d.validateWritablePath("Reference.setPriority",this.path),d.validatePriority("Reference.setPriority",1,e,!1),p.validateCallback("Reference.setPriority",2,t,!0);var n=new _.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){p.validateArgCount("Reference.push",0,2,arguments.length),d.validateWritablePath("Reference.push",this.path),d.validateFirebaseDataArg("Reference.push",1,e,this.path,!0),p.validateCallback("Reference.push",2,t,!0);var n,r=this.repo.serverTime(),i=a.nextPushId(r),o=this.child(i),l=this.child(i);return n=null!=e?o.set(e,t).then(function(){return l}):Promise.resolve(l),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof t&&n.catch(function(){}),o},t.prototype.onDisconnect=function(){return d.validateWritablePath("Reference.onDisconnect",this.path),new i.OnDisconnect(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),t}(s.Query);t.Reference=y,s.Query.__referenceConstructor=y,f.SyncPoint.__referenceConstructor=y},"6oqh":function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n("JEJ4"),o=n("F1yO"),l=n("JEJ4"),a=n("JEJ4"),s=n("JEJ4"),u=n("zzcx");t.ReadonlyRestClient=function(e){r(t,e);function t(t,n,r){var i=e.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=o.logWrapper("p:rest:"),i.listens_={},i}return t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(i.assert(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,r,i){var o=this,l=e.path.toString();this.log_("Listen called for "+l+" "+e.queryIdentifier());var s=t.getListenId_(e,r),u={};this.listens_[s]=u;var c=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(l+".json",c,function(e,t){var n=t;404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(l,n,!1,r),a.safeGet(o.listens_,s)===u&&i(e?401==e?"permission_denied":"rest_error:"+e:"ok",null)})},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var a=i&&i.accessToken;a&&(t.auth=a);var u=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?"+s.querystring(t);r.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(n&&4===c.readyState){r.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=l.jsonEval(c.responseText)}catch(e){o.warn("Failed to parse JSON response for "+u+": "+c.responseText)}n(null,e)}else 401!==c.status&&404!==c.status&&o.warn("Got unsuccessful REST response for "+u+" Status: "+c.status),n(c.status);n=null}},c.open("GET",u,!0),c.send()})},t}(u.ServerActions)},"7qHF":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("mZoP"),i=n("xhf5"),o=n("+VeI"),l=n("j0qB");t.DataConnection=i.PersistentConnection,i.PersistentConnection.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},i.PersistentConnection.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},t.RealTimeConnection=l.Connection,t.hijackHash=function(e){var t=i.PersistentConnection.prototype.put;return i.PersistentConnection.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){i.PersistentConnection.prototype.put=t}},t.ConnectionTarget=r.RepoInfo,t.queryIdentifier=function(e){return e.queryIdentifier()},t.listens=function(e){return e.repo.persistentConnection_.listens_},t.forceRestClient=function(e){o.RepoManager.getInstance().forceRestClient(e)}},"8UuO":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("F1yO"),i=n("PKQO"),o=n("fvGz"),l=n("5pXs"),a=n("pHuv"),s=n("+VeI"),u=n("JEJ4"),c=n("xfHL");t.Database=function(){function e(e){this.repo_=e,e instanceof a.Repo||r.fatal("Don't call new Database() directly - please use firebase.database()."),this.root_=new l.Reference(e,o.Path.Empty),this.INTERNAL=new h(this)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),e.prototype.ref=function(e){return this.checkDeleted_("ref"),u.validateArgCount("database.ref",0,1,arguments.length),void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),u.validateArgCount(t,1,1,arguments.length);var n=i.parseRepoInfo(e);c.validateUrl(t,1,n);var o=n.repoInfo;return o.host!==this.repo_.repoInfo_.host&&r.fatal(t+": Host name does not match the current database: (found "+o.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repo_&&r.fatal("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){u.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){u.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"}},e}();var h=function(){function e(e){this.database=e}return e.prototype.delete=function(){return this.database.checkDeleted_("delete"),s.RepoManager.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,Promise.resolve()},e}();t.DatabaseInternals=h},"9ard":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("XtH8"),i=n("JEJ4"),o=n("F1yO"),l=n("cm6g"),a=n("UcKF"),s=n("JEJ4"),u=n("Rgd9"),c=n("JEJ4"),h=n("JEJ4"),d=null;"undefined"!=typeof MozWebSocket?d=MozWebSocket:"undefined"!=typeof WebSocket&&(d=WebSocket),t.setWebSocketImpl=function(e){d=e},t.WebSocketConnection=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=o.logWrapper(this.connId),this.stats_=l.StatsManager.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(e,t,n){var r={};return r[a.VERSION_PARAM]=a.PROTOCOL_VERSION,!h.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(a.FORGE_DOMAIN)&&(r[a.REFERER_PARAM]=a.FORGE_REF),t&&(r[a.TRANSPORT_SESSION_PARAM]=t),n&&(r[a.LAST_SESSION_PARAM]=n),e.connectionURL(a.WEBSOCKET,r)},t.prototype.open=function(t,n){var i=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,u.PersistentStorage.set("previous_websocket_failure",!0);try{if(h.isNodeSdk()){var o={headers:{"User-Agent":"Firebase/"+a.PROTOCOL_VERSION+"/"+r.default.SDK_VERSION+"/"+e.platform+"/"+(s.CONSTANTS.NODE_ADMIN?"AdminNode":"Node")}},l=e.env,c=0==this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;c&&(o.proxy={origin:c}),this.mySock=new d(this.connURL,[],o)}else this.mySock=new d(this.connURL)}catch(e){this.log_("Error instantiating WebSocket.");var p=e.message||e.data;return p&&this.log_(p),void this.onClosed_()}this.mySock.onopen=function(){i.log_("Websocket connected."),i.everConnected_=!0},this.mySock.onclose=function(){i.log_("Websocket connection was disconnected."),i.mySock=null,i.onClosed_()},this.mySock.onmessage=function(e){i.handleIncomingFrame(e)},this.mySock.onerror=function(e){i.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&i.log_(t),i.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==d&&!t.forceDisallow_},t.previouslyFailed=function(){return u.PersistentStorage.isInMemoryStorage||!0===u.PersistentStorage.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){u.PersistentStorage.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("");this.frames=null;var n=c.jsonEval(t);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},t.prototype.extractFrameCount_=function(e){if(i.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},t.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(e){this.resetKeepAlive();var t=c.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=o.splitStringBySize(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}()}).call(t,n("1WNV"))},"9kU/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("p+VM"),i=n("ertD"),o=n("JEJ4");t.EventGenerator=function(){function e(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(e,t,n){var r=this,o=[],l=[];return e.forEach(function(e){e.type===i.Change.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&l.push(i.Change.childMovedChange(e.childName,e.snapshotNode))}),this.generateEventsForType_(o,i.Change.CHILD_REMOVED,e,n,t),this.generateEventsForType_(o,i.Change.CHILD_ADDED,e,n,t),this.generateEventsForType_(o,i.Change.CHILD_MOVED,l,n,t),this.generateEventsForType_(o,i.Change.CHILD_CHANGED,e,n,t),this.generateEventsForType_(o,i.Change.VALUE,e,n,t),o},e.prototype.generateEventsForType_=function(e,t,n,r,i){var o=this,l=n.filter(function(e){return e.type===t});l.sort(this.compareChanges_.bind(this)),l.forEach(function(t){var n=o.materializeSingleChange_(t,i);r.forEach(function(r){r.respondsTo(t.type)&&e.push(r.createEvent(n,o.query_))})})},e.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type?e:(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_),e)},e.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw o.assertionError("Should only compare child_ events.");var n=new r.NamedNode(e.childName,e.snapshotNode),i=new r.NamedNode(t.childName,t.snapshotNode);return this.index_.compare(n,i)},e}()},A4jy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4");t.DataEvent=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+r.stringify(this.snapshot.exportVal())},e}(),t.CancelEvent=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}()},B2QA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4"),i=n("JEJ4"),o=n("fvGz"),l=n("2kNe"),a=n("/fob"),s=n("R3TC");t.WriteTree=function(){function e(){this.visibleWrites_=l.CompoundWrite.Empty,this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(e){return new u(e,this)},e.prototype.addOverwrite=function(e,t,n,r){i.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},e.prototype.addMerge=function(e,t,n){i.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},e.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},e.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex(function(t){return t.writeId===e});i.assert(n>=0,"removeWrite called with nonexistent writeId.");var o=this.allWrites_[n];this.allWrites_.splice(n,1);for(var l=o.visible,a=!1,s=this.allWrites_.length-1;l&&s>=0;){var u=this.allWrites_[s];u.visible&&(s>=n&&this.recordContainsPath_(u,o.path)?l=!1:o.path.contains(u.path)&&(a=!0)),s--}return!!l&&(a?(this.resetTree_(),!0):(o.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(o.path):r.forEach(o.children,function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(o.path.child(e))}),!0))},e.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcCompleteEventCache=function(t,n,r,i){if(r||i){var l=this.visibleWrites_.childCompoundWrite(t);return!i&&l.isEmpty()?n:i||null!=n||l.hasCompleteWrite(o.Path.Empty)?e.layerTree_(this.allWrites_,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))},t).apply(n||s.ChildrenNode.EMPTY_NODE):null}var a=this.visibleWrites_.getCompleteNode(t);if(null!=a)return a;var u=this.visibleWrites_.childCompoundWrite(t);return u.isEmpty()?n:null!=n||u.hasCompleteWrite(o.Path.Empty)?u.apply(n||s.ChildrenNode.EMPTY_NODE):null},e.prototype.calcCompleteEventChildren=function(e,t){var n=s.ChildrenNode.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(e);if(r)return r.isLeafNode()||r.forEachChild(a.PRIORITY_INDEX,function(e,t){n=n.updateImmediateChild(e,t)}),n;if(t){var i=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(a.PRIORITY_INDEX,function(e,t){var r=i.childCompoundWrite(new o.Path(e)).apply(t);n=n.updateImmediateChild(e,r)}),i.getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){i.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var o=e.child(t);if(this.visibleWrites_.hasCompleteWrite(o))return null;var l=this.visibleWrites_.childCompoundWrite(o);return l.isEmpty()?r.getChild(t):l.apply(r.getChild(t))},e.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(t)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(t)):null},e.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcIndexedSlice=function(e,t,n,r,i,l){var a,s=this.visibleWrites_.childCompoundWrite(e),u=s.getCompleteNode(o.Path.Empty);if(null!=u)a=u;else{if(null==t)return[];a=s.apply(t)}if((a=a.withIndex(l)).isEmpty()||a.isLeafNode())return[];for(var c=[],h=l.getCompare(),d=i?a.getReverseIteratorFrom(n,l):a.getIteratorFrom(n,l),p=d.getNext();p&&c.length<r;)0!==h(p,n)&&c.push(p),p=d.getNext();return c},e.prototype.recordContainsPath_=function(e,t){return e.snap?e.path.contains(t):!!r.findKey(e.children,function(n,r){return e.path.child(r).contains(t)})},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,o.Path.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},e.DefaultFilter_=function(e){return e.visible},e.layerTree_=function(e,t,n){for(var a=l.CompoundWrite.Empty,s=0;s<e.length;++s){var u=e[s];if(t(u)){var c=u.path,h=void 0;if(u.snap)n.contains(c)?(h=o.Path.relativePath(n,c),a=a.addWrite(h,u.snap)):c.contains(n)&&(h=o.Path.relativePath(c,n),a=a.addWrite(o.Path.Empty,u.snap.getChild(h)));else{if(!u.children)throw i.assertionError("WriteRecord should have .snap or .children");if(n.contains(c))h=o.Path.relativePath(n,c),a=a.addWrites(h,u.children);else if(c.contains(n))if((h=o.Path.relativePath(c,n)).isEmpty())a=a.addWrites(o.Path.Empty,u.children);else{var d=r.safeGet(u.children,h.getFront());if(d){var p=d.getChild(h.popFront());a=a.addWrite(o.Path.Empty,p)}}}}}return a},e}();var u=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},e.prototype.calcIndexedSlice=function(e,t,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,i)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}();t.WriteTreeRef=u},CIVu:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n("YY8E"),o=n("JEJ4");t.VisibilityMonitor=function(e){r(t,e);function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!=typeof document&&"undefined"!=typeof document.addEventListener&&("undefined"!=typeof document.hidden?(n="visibilitychange",t="hidden"):"undefined"!=typeof document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):"undefined"!=typeof document.msHidden?(n="msvisibilitychange",t="msHidden"):"undefined"!=typeof document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))},!1),r}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return o.assert("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(i.EventEmitter)},Dvgu:function(e,t,n){e.exports=n("tYwN")},EAgh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4");t.TransactionResult=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return r.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}()},F1yO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4"),i=n("JEJ4"),o=n("JEJ4"),l=n("JEJ4"),a=n("JEJ4"),s=n("JEJ4"),u=n("Rgd9"),c=n("JEJ4");t.LUIDGenerator=function(){var e=1;return function(){return e++}}(),t.sha1=function(e){var t=a.stringToByteArray(e),n=new l.Sha1;n.update(t);var r=n.digest();return o.base64.encodeByteArray(r)};var h=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++)Array.isArray(e[r])||e[r]&&"object"==typeof e[r]&&"number"==typeof e[r].length?n+=h.apply(null,e[r]):n+="object"==typeof e[r]?s.stringify(e[r]):e[r],n+=" ";return n};t.logger=null;var d=!0;t.enableLogging=function(e,n){r.assert(!n||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?("undefined"!=typeof console&&("function"==typeof console.log?t.logger=console.log.bind(console):"object"==typeof console.log&&(t.logger=function(e){console.log(e)})),n&&u.SessionStorage.set("logging_enabled",!0)):"function"==typeof e?t.logger=e:(t.logger=null,u.SessionStorage.remove("logging_enabled"))},t.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!0===d&&(d=!1,null===t.logger&&!0===u.SessionStorage.get("logging_enabled")&&t.enableLogging(!0)),t.logger){var r=h.apply(null,e);t.logger(r)}},t.logWrapper=function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];t.log.apply(void 0,[e].concat(n))}},t.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("undefined"!=typeof console){var n="FIREBASE INTERNAL ERROR: "+h.apply(void 0,e);"undefined"!=typeof console.error?console.error(n):console.log(n)}},t.fatal=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=h.apply(void 0,e);throw new Error("FIREBASE FATAL ERROR: "+n)},t.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("undefined"!=typeof console){var n="FIREBASE WARNING: "+h.apply(void 0,e);"undefined"!=typeof console.warn?console.warn(n):console.log(n)}},t.warnIfPageIsSecure=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&t.warn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},t.warnAboutUnsupportedMethod=function(e){t.warn(e+" is unsupported and will likely change soon.  Please do not use.")},t.isInvalidJSONNumber=function(e){return"number"==typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)},t.executeWhenDOMReady=function(e){if(c.isNodeSdk()||"complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},t.MIN_NAME="[MIN_NAME]",t.MAX_NAME="[MAX_NAME]",t.nameCompare=function(e,n){if(e===n)return 0;if(e===t.MIN_NAME||n===t.MAX_NAME)return-1;if(n===t.MIN_NAME||e===t.MAX_NAME)return 1;var r=t.tryParseInt(e),i=t.tryParseInt(n);return null!==r?null!==i?r-i==0?e.length-n.length:r-i:-1:null!==i?1:e<n?-1:1},t.stringCompare=function(e,t){return e===t?0:e<t?-1:1},t.requireKey=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+s.stringify(t))},t.ObjectToUniqueKey=function(e){if("object"!=typeof e||null===e)return s.stringify(e);var n=[];for(var r in e)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=s.stringify(n[o]),i+=":",i+=t.ObjectToUniqueKey(e[n[o]]);return i+"}"},t.splitStringBySize=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)r.push(e.substring(i,i+t>n?n:i+t));return r},t.each=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;++n)t(n,e[n]);else i.forEach(e,function(e,n){return t(n,e)})},t.bindCallback=function(e,t){return t?e.bind(t):e},t.doubleToIEEE754String=function(e){r.assert(!t.isInvalidJSONNumber(e),"Invalid JSON number");var n,i,o,l,a,s,u;for(0===e?(i=0,o=0,n=1/e==-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(i=(l=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,o=Math.round(e*Math.pow(2,52-l)-Math.pow(2,52))):(i=0,o=Math.round(e/Math.pow(2,-1074)))),s=[],a=52;a;a-=1)s.push(o%2?1:0),o=Math.floor(o/2);for(a=11;a;a-=1)s.push(i%2?1:0),i=Math.floor(i/2);s.push(n?1:0),s.reverse(),u=s.join("");var c="";for(a=0;a<64;a+=8){var h=parseInt(u.substr(a,8),2).toString(16);1===h.length&&(h="0"+h),c+=h}return c.toLowerCase()},t.isChromeExtensionContentScript=function(){return!("object"!=typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},t.isWindowsStoreApp=function(){return"object"==typeof Windows&&"object"==typeof Windows.UI},t.errorForServerCode=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?n="Client doesn't have permission to access the desired data.":"unavailable"==e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r},t.INTEGER_REGEXP_=new RegExp("^-?\\d{1,10}$"),t.tryParseInt=function(e){if(t.INTEGER_REGEXP_.test(e)){var n=Number(e);if(n>=-2147483648&&n<=2147483647)return n}return null},t.exceptionGuard=function(e){try{e()}catch(e){setTimeout(function(){throw t.warn("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},t.callUserCallback=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];"function"==typeof e&&t.exceptionGuard(function(){e.apply(void 0,n)})},t.beingCrawled=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},t.exportPropGetter=function(e,t,n){Object.defineProperty(e,t,{get:n})},t.setTimeoutNonBlocking=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n}},FGYS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("qYrH"),i=n("9ard"),o=n("F1yO");t.TransportManager=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[r.BrowserPollConnection,i.WebSocketConnection]},enumerable:!0,configurable:!0}),e.prototype.initTransports_=function(t){var n=i.WebSocketConnection&&i.WebSocketConnection.isAvailable(),r=n&&!i.WebSocketConnection.previouslyFailed();if(t.webSocketOnly&&(n||o.warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[i.WebSocketConnection];else{var l=this.transports_=[];o.each(e.ALL_TRANSPORTS,function(e,t){t&&t.isAvailable()&&l.push(t)})}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}()},FOvx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("fvGz"),i=n("gOHv");t.ListenComplete=function(){function e(e,t){this.source=e,this.path=t,this.type=i.OperationType.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,r.Path.Empty):new e(this.source,this.path.popFront())},e}()},Fwmd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4");t.MemoryStorage=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return r.contains(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}()},G0Qy:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n("JEJ4"),o=n("F1yO"),l=n("GboV"),a=n("R3TC"),s=n("p+VM"),u=n("43Go");t.PathIndex=function(e){r(t,e);function t(t){var n=e.call(this)||this;return n.indexPath_=t,i.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?o.nameCompare(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=u.nodeFromJSON(e),r=a.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,n);return new s.NamedNode(t,r)},t.prototype.maxPost=function(){var e=a.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,a.MAX_NODE);return new s.NamedNode(o.MAX_NAME,e)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(l.Index)},GEki:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("y8hQ"),i=function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}();t.NoCompleteChildSource_=i,t.NO_COMPLETE_CHILD_SOURCE=new i,t.WriteTreeCompleteChildSource=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new r.CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===i.length?null:i[0]},e}()},GboV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("p+VM"),i=n("F1yO");t.Index=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new r.NamedNode(i.MIN_NAME,e),o=new r.NamedNode(i.MIN_NAME,t);return 0!==this.compare(n,o)},e.prototype.minPost=function(){return r.NamedNode.MIN},e}()},GnQ5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4"),i=n("xfHL"),o=n("fvGz"),l=n("/fob");t.DataSnapshot=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return r.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return r.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return r.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return r.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){r.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),i.validatePathString("DataSnapshot.child",1,t,!1);var n=new o.Path(t),a=this.ref_.child(n);return new e(this.node_.getChild(n),a,l.PRIORITY_INDEX)},e.prototype.hasChild=function(e){r.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),i.validatePathString("DataSnapshot.hasChild",1,e,!1);var t=new o.Path(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return r.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;return r.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),r.validateCallback("DataSnapshot.forEach",1,t,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(r,i){return t(new e(i,n.ref_.child(r),l.PRIORITY_INDEX))})},e.prototype.hasChildren=function(){return r.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return r.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return r.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}()},Htcq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4"),i=n("F1yO"),o=n("rbSf"),l=n("R3TC"),a=n("JEJ4"),s=n("dVae"),u=n("FOvx"),c=n("/68J"),h=n("gOHv"),d=n("kCHx"),p=n("fvGz"),_=n("uCc5"),f=n("B2QA");t.SyncTree=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=s.ImmutableTree.Empty,this.pendingWriteTree_=new f.WriteTree,this.tagToQueryMap_={},this.queryToTagMap_={}}return e.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new d.Overwrite(h.OperationSource.User,e,t)):[]},e.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=s.ImmutableTree.fromObject(t);return this.applyOperationToSyncPoints_(new c.Merge(h.OperationSource.User,e,r))},e.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var r=s.ImmutableTree.Empty;return null!=n.snap?r=r.set(p.Path.Empty,!0):a.forEach(n.children,function(e,t){r=r.set(new p.Path(e),t)}),this.applyOperationToSyncPoints_(new o.AckUserWrite(n.path,r,t))}return[]},e.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new d.Overwrite(h.OperationSource.Server,e,t))},e.prototype.applyServerMerge=function(e,t){var n=s.ImmutableTree.fromObject(t);return this.applyOperationToSyncPoints_(new c.Merge(h.OperationSource.Server,e,n))},e.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new u.ListenComplete(h.OperationSource.Server,e))},e.prototype.applyTaggedQueryOverwrite=function(t,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=e.parseQueryKey_(i),l=o.path,a=o.queryId,s=p.Path.relativePath(l,t),u=new d.Overwrite(h.OperationSource.forServerTaggedQuery(a),s,n);return this.applyTaggedOperation_(l,u)}return[]},e.prototype.applyTaggedQueryMerge=function(t,n,r){var i=this.queryKeyForTag_(r);if(i){var o=e.parseQueryKey_(i),l=o.path,a=o.queryId,u=p.Path.relativePath(l,t),d=s.ImmutableTree.fromObject(n),_=new c.Merge(h.OperationSource.forServerTaggedQuery(a),u,d);return this.applyTaggedOperation_(l,_)}return[]},e.prototype.applyTaggedListenComplete=function(t,n){var r=this.queryKeyForTag_(n);if(r){var i=e.parseQueryKey_(r),o=i.path,l=i.queryId,a=p.Path.relativePath(o,t),s=new u.ListenComplete(h.OperationSource.forServerTaggedQuery(l),a);return this.applyTaggedOperation_(o,s)}return[]},e.prototype.addEventRegistration=function(t,n){var i=t.path,o=null,a=!1;this.syncPointTree_.foreachOnPath(i,function(e,t){var n=p.Path.relativePath(e,i);o=o||t.getCompleteServerCache(n),a=a||t.hasCompleteView()});var s=this.syncPointTree_.get(i);s?(a=a||s.hasCompleteView(),o=o||s.getCompleteServerCache(p.Path.Empty)):(s=new _.SyncPoint,this.syncPointTree_=this.syncPointTree_.set(i,s));var u;null!=o?u=!0:(u=!1,o=l.ChildrenNode.EMPTY_NODE,this.syncPointTree_.subtree(i).foreachChild(function(e,t){var n=t.getCompleteServerCache(p.Path.Empty);n&&(o=o.updateImmediateChild(e,n))}));var c=s.viewExistsForQuery(t);if(!c&&!t.getQueryParams().loadsAllData()){var h=e.makeQueryKey_(t);r.assert(!(h in this.queryToTagMap_),"View does not exist, but we have a tag");var d=e.getNextQueryTag_();this.queryToTagMap_[h]=d,this.tagToQueryMap_["_"+d]=h}var f=this.pendingWriteTree_.childWrites(i),y=s.addEventRegistration(t,n,f,o,u);if(!c&&!a){var v=s.viewForQuery(t);y=y.concat(this.setupListener_(t,v))}return y},e.prototype.removeEventRegistration=function(t,n,r){var i=this,o=t.path,l=this.syncPointTree_.get(o),a=[];if(l&&("default"===t.queryIdentifier()||l.viewExistsForQuery(t))){var s=l.removeEventRegistration(t,n,r);l.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var u=s.removed;a=s.events;var c=-1!==u.findIndex(function(e){return e.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(e,t){return t.hasCompleteView()});if(c&&!h){var d=this.syncPointTree_.subtree(o);if(!d.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(d),_=0;_<p.length;++_){var f=p[_],y=f.getQuery(),v=this.createListenerForView_(f);this.listenProvider_.startListening(e.queryForListening_(y),this.tagForQuery_(y),v.hashFn,v.onComplete)}}!h&&u.length>0&&!r&&(c?this.listenProvider_.stopListening(e.queryForListening_(t),null):u.forEach(function(t){var n=i.queryToTagMap_[e.makeQueryKey_(t)];i.listenProvider_.stopListening(e.queryForListening_(t),n)})),this.removeTags_(u)}return a},e.prototype.calcCompleteEventCache=function(e,t){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(e,function(t,n){var r=p.Path.relativePath(t,e),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(e,r,t,!0)},e.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(e,t,n){if(t&&t.hasCompleteView())return[t.getCompleteView()];var r=[];return t&&(r=t.getQueryViews()),a.forEach(n,function(e,t){r=r.concat(t)}),r})},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var i=e.makeQueryKey_(r),o=this.queryToTagMap_[i];delete this.queryToTagMap_[i],delete this.tagToQueryMap_["_"+o]}}},e.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},e.prototype.setupListener_=function(t,n){var i=t.path,o=this.tagForQuery_(t),l=this.createListenerForView_(n),s=this.listenProvider_.startListening(e.queryForListening_(t),o,l.hashFn,l.onComplete),u=this.syncPointTree_.subtree(i);if(o)r.assert(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map(function(e){return e.getQuery()}))),a.forEach(n,function(e,t){r=r.concat(t)}),r}),h=0;h<c.length;++h){var d=c[h];this.listenProvider_.stopListening(e.queryForListening_(d),this.tagForQuery_(d))}return s},e.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||l.ChildrenNode.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?t.applyTaggedListenComplete(n.path,r):t.applyListenComplete(n.path);var o=i.errorForServerCode(e,n);return t.removeEventRegistration(n,null,o)}}},e.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},e.parseQueryKey_=function(e){var t=e.indexOf("$");return r.assert(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new p.Path(e.substr(0,t))}},e.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap_["_"+e]},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return a.safeGet(this.queryToTagMap_,n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);r.assert(n,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,i,null)},e.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(p.Path.Empty))},e.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var i=t.get(p.Path.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(p.Path.Empty));var o=[],l=e.path.getFront(),a=e.operationForChild(l),s=t.children.get(l);if(s&&a){var u=n?n.getImmediateChild(l):null,c=r.child(l);o=o.concat(this.applyOperationHelper_(a,s,u,c))}return i&&(o=o.concat(i.applyOperation(e,r,n))),o},e.prototype.applyOperationDescendantsHelper_=function(e,t,n,r){var i=this,o=t.get(p.Path.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(p.Path.Empty));var l=[];return t.children.inorderTraversal(function(t,o){var a=n?n.getImmediateChild(t):null,s=r.child(t),u=e.operationForChild(t);u&&(l=l.concat(i.applyOperationDescendantsHelper_(u,o,a,s)))}),o&&(l=l.concat(o.applyOperation(e,r,n))),l},e.nextQueryTag_=1,e}()},KH1l:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("gOHv"),i=n("JEJ4"),o=n("/0OS"),l=n("ertD"),a=n("R3TC"),s=n("stu6"),u=n("dVae"),c=n("fvGz"),h=n("GEki"),d=function(e,t){this.viewCache=e,this.changes=t};t.ProcessorResult=d,t.ViewProcessor=function(){function e(e){this.filter_=e}return e.prototype.assertIndexed=function(e){i.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),i.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,l,a){var s,u,c=new o.ChildChangeAccumulator;if(n.type===r.OperationType.OVERWRITE){var h=n;h.source.fromUser?s=this.applyUserOverwrite_(t,h.path,h.snap,l,a,c):(i.assert(h.source.fromServer,"Unknown source."),u=h.source.tagged||t.getServerCache().isFiltered()&&!h.path.isEmpty(),s=this.applyServerOverwrite_(t,h.path,h.snap,l,a,u,c))}else if(n.type===r.OperationType.MERGE){var p=n;p.source.fromUser?s=this.applyUserMerge_(t,p.path,p.children,l,a,c):(i.assert(p.source.fromServer,"Unknown source."),u=p.source.tagged||t.getServerCache().isFiltered(),s=this.applyServerMerge_(t,p.path,p.children,l,a,u,c))}else if(n.type===r.OperationType.ACK_USER_WRITE){var _=n;s=_.revert?this.revertUserWrite_(t,_.path,l,a,c):this.ackUserWrite_(t,_.path,_.affectedTree,l,a,c)}else{if(n.type!==r.OperationType.LISTEN_COMPLETE)throw i.assertionError("Unknown operation type: "+n.type);s=this.listenComplete_(t,n.path,l,c)}var f=c.getChanges();return e.maybeAddValueEvent_(t,s,f),new d(s,f)},e.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e.getCompleteEventSnap();(n.length>0||!e.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(l.Change.valueChange(t.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,o){var l=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var s=void 0,u=void 0;if(t.isEmpty())if(i.assert(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var c=e.getCompleteServerSnap(),h=n.calcCompleteEventChildren(c instanceof a.ChildrenNode?c:a.ChildrenNode.EMPTY_NODE);s=this.filter_.updateFullNode(e.getEventCache().getNode(),h,o)}else{var d=n.calcCompleteEventCache(e.getCompleteServerSnap());s=this.filter_.updateFullNode(e.getEventCache().getNode(),d,o)}else{var p=t.getFront();if(".priority"==p){i.assert(1==t.getLength(),"Can't have a priority with additional path components");var _=l.getNode();u=e.getServerCache().getNode();var f=n.calcEventCacheAfterServerOverwrite(t,_,u);s=null!=f?this.filter_.updatePriority(_,f):l.getNode()}else{var y=t.popFront(),v=void 0;if(l.isCompleteForChild(p)){u=e.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(t,l.getNode(),u);v=null!=g?l.getNode().getImmediateChild(p).updateChild(y,g):l.getNode().getImmediateChild(p)}else v=n.calcCompleteChild(p,e.getServerCache());s=null!=v?this.filter_.updateChild(l.getNode(),p,v,y,r,o):l.getNode()}}return e.updateEventSnap(s,l.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(e,t,n,r,i,o,l){var a,s=e.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())a=u.updateFullNode(s.getNode(),n,null);else if(u.filtersNodes()&&!s.isFiltered()){var c=s.getNode().updateChild(t,n);a=u.updateFullNode(s.getNode(),c,null)}else{var d=t.getFront();if(!s.isCompleteForPath(t)&&t.getLength()>1)return e;var p=t.popFront(),_=s.getNode().getImmediateChild(d).updateChild(p,n);a=".priority"==d?u.updatePriority(s.getNode(),_):u.updateChild(s.getNode(),d,_,p,h.NO_COMPLETE_CHILD_SOURCE,null)}var f=e.updateServerSnap(a,s.isFullyInitialized()||t.isEmpty(),u.filtersNodes()),y=new h.WriteTreeCompleteChildSource(r,f,i);return this.generateEventCacheAfterServerEvent_(f,t,r,y,l)},e.prototype.applyUserOverwrite_=function(e,t,n,r,i,o){var l,s,u=e.getEventCache(),c=new h.WriteTreeCompleteChildSource(r,e,i);if(t.isEmpty())s=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),l=e.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var d=t.getFront();if(".priority"===d)s=this.filter_.updatePriority(e.getEventCache().getNode(),n),l=e.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var p=t.popFront(),_=u.getNode().getImmediateChild(d),f=void 0;if(p.isEmpty())f=n;else{var y=c.getCompleteChild(d);f=null!=y?".priority"===p.getBack()&&y.getChild(p.parent()).isEmpty()?y:y.updateChild(p,n):a.ChildrenNode.EMPTY_NODE}if(_.equals(f))l=e;else{var v=this.filter_.updateChild(u.getNode(),d,f,p,c,o);l=e.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return l},e.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},e.prototype.applyUserMerge_=function(t,n,r,i,o,l){var a=this,s=t;return r.foreach(function(r,u){var c=n.child(r);e.cacheHasChild_(t,c.getFront())&&(s=a.applyUserOverwrite_(s,c,u,i,o,l))}),r.foreach(function(r,u){var c=n.child(r);e.cacheHasChild_(t,c.getFront())||(s=a.applyUserOverwrite_(s,c,u,i,o,l))}),s},e.prototype.applyMerge_=function(e,t){return t.foreach(function(t,n){e=e.updateChild(t,n)}),e},e.prototype.applyServerMerge_=function(e,t,n,r,i,o,l){var a=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var s,h=e;s=t.isEmpty()?n:u.ImmutableTree.Empty.setTree(t,n);var d=e.getServerCache().getNode();return s.children.inorderTraversal(function(t,n){if(d.hasChild(t)){var s=e.getServerCache().getNode().getImmediateChild(t),u=a.applyMerge_(s,n);h=a.applyServerOverwrite_(h,new c.Path(t),u,r,i,o,l)}}),s.children.inorderTraversal(function(t,n){var s=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!d.hasChild(t)&&!s){var u=e.getServerCache().getNode().getImmediateChild(t),p=a.applyMerge_(u,n);h=a.applyServerOverwrite_(h,new c.Path(t),p,r,i,o,l)}}),h},e.prototype.ackUserWrite_=function(e,t,n,r,i,o){if(null!=r.shadowingWrite(t))return e;var l=e.getServerCache().isFiltered(),a=e.getServerCache();if(null!=n.value){if(t.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,a.getNode().getChild(t),r,i,l,o);if(t.isEmpty()){var h=u.ImmutableTree.Empty;return a.getNode().forEachChild(s.KEY_INDEX,function(e,t){h=h.set(new c.Path(e),t)}),this.applyServerMerge_(e,t,h,r,i,l,o)}return e}var d=u.ImmutableTree.Empty;return n.foreach(function(e,n){var r=t.child(e);a.isCompleteForPath(r)&&(d=d.set(e,a.getNode().getChild(r)))}),this.applyServerMerge_(e,t,d,r,i,l,o)},e.prototype.listenComplete_=function(e,t,n,r){var i=e.getServerCache(),o=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||t.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,t,n,h.NO_COMPLETE_CHILD_SOURCE,r)},e.prototype.revertUserWrite_=function(e,t,n,r,o){var l;if(null!=n.shadowingWrite(t))return e;var s=new h.WriteTreeCompleteChildSource(n,e,r),u=e.getEventCache().getNode(),d=void 0;if(t.isEmpty()||".priority"===t.getFront()){var p=void 0;if(e.getServerCache().isFullyInitialized())p=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var _=e.getServerCache().getNode();i.assert(_ instanceof a.ChildrenNode,"serverChildren would be complete if leaf node"),p=n.calcCompleteEventChildren(_)}d=this.filter_.updateFullNode(u,p=p,o)}else{var f=t.getFront(),y=n.calcCompleteChild(f,e.getServerCache());null==y&&e.getServerCache().isCompleteForChild(f)&&(y=u.getImmediateChild(f)),(d=null!=y?this.filter_.updateChild(u,f,y,t.popFront(),s,o):e.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,a.ChildrenNode.EMPTY_NODE,t.popFront(),s,o):u).isEmpty()&&e.getServerCache().isFullyInitialized()&&(l=n.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(d=this.filter_.updateFullNode(d,l,o))}return l=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(c.Path.Empty),e.updateEventSnap(d,l,this.filter_.filtersNodes())},e}()},Nq7v:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n("GboV"),o=n("p+VM"),l=n("F1yO"),a=n("43Go"),s=function(e){r(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}return t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?l.nameCompare(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return o.NamedNode.MIN},t.prototype.maxPost=function(){return o.NamedNode.MAX},t.prototype.makePost=function(e,t){var n=a.nodeFromJSON(e);return new o.NamedNode(t,n)},t.prototype.toString=function(){return".value"},t}(i.Index);t.ValueIndex=s,t.VALUE_INDEX=new s},PKQO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("fvGz"),i=n("mZoP"),o=n("F1yO");t.parseRepoInfo=function(e){var n=t.parseURL(e),l=n.subdomain;return"firebase"===n.domain&&o.fatal(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),l&&"undefined"!=l||o.fatal("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||o.warnIfPageIsSecure(),{repoInfo:new i.RepoInfo(n.host,n.secure,l,"ws"===n.scheme||"wss"===n.scheme),path:new r.Path(n.pathString)}},t.parseURL=function(e){var t="",n="",r="",i="",o=!0,l="https",a=443;if("string"==typeof e){var s=e.indexOf("//");s>=0&&(l=e.substring(0,s-1),e=e.substring(s+2));var u=e.indexOf("/");-1===u&&(u=e.length),t=e.substring(0,u),i=function(t){for(var n="",r=e.substring(u).split("/"),i=0;i<r.length;i++)if(r[i].length>0){var o=r[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(e){}n+="/"+o}return n}();var c=t.split(".");3===c.length?(n=c[1],r=c[0].toLowerCase()):2===c.length&&(n=c[0]),(s=t.indexOf(":"))>=0&&(o="https"===l||"wss"===l,a=parseInt(t.substring(s+1),10))}return{host:t,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i}}},R3TC:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i,o=n("JEJ4"),l=n("F1yO"),a=n("isNy"),s=n("p+VM"),u=n("3FiG"),c=n("/fob"),h=n("stu6"),d=n("b5Wm"),p=n("04zk"),_=n("zFzr"),f=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&u.validatePriorityNode(this.priorityNode_),this.children_.isEmpty()&&o.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return i||(i=new e(new a.SortedMap(_.NAME_COMPARATOR),null,d.IndexMap.Default))},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||i},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?i:t},e.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(o.assert(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new s.NamedNode(t,n),l=void 0,a=void 0;return n.isEmpty()?(l=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(l=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(r,this.children_)),new e(l,l.isEmpty()?i:this.priorityNode_,a)},e.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;o.assert(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(c.PRIORITY_INDEX,function(l,a){n[l]=a.val(t),r++,o&&e.INTEGER_REGEXP_.test(l)?i=Math.max(i,Number(l)):o=!1}),!t&&o&&i<2*r){var l=[];for(var a in n)l[a]=n[a];return l}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+u.priorityHashText(this.getPriority().val())+":"),this.forEachChild(c.PRIORITY_INDEX,function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":l.sha1(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new s.NamedNode(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new s.NamedNode(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new s.NamedNode(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var r=this.children_.getIteratorFrom(e.name,s.NamedNode.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var r=this.children_.getReverseIteratorFrom(e.name,s.NamedNode.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===t.MAX_NODE?-1:0},e.prototype.withIndex=function(t){if(t===h.KEY_INDEX||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===h.KEY_INDEX||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(c.PRIORITY_INDEX),r=t.getIterator(c.PRIORITY_INDEX),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===h.KEY_INDEX?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}();t.ChildrenNode=f;var y=function(e){r(t,e);function t(){return e.call(this,new a.SortedMap(_.NAME_COMPARATOR),f.EMPTY_NODE,d.IndexMap.Default)||this}return t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return f.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(f);t.MaxNode=y,t.MAX_NODE=new y,Object.defineProperties(s.NamedNode,{MIN:{value:new s.NamedNode(l.MIN_NAME,f.EMPTY_NODE)},MAX:{value:new s.NamedNode(l.MAX_NAME,t.MAX_NODE)}}),h.KeyIndex.__EMPTY_NODE=f.EMPTY_NODE,p.LeafNode.__childrenNodeConstructor=f,u.setMaxNode(t.MAX_NODE),c.setMaxNode(t.MAX_NODE)},Rgd9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("1zSO"),i=n("Fwmd"),o=function(e){try{if("undefined"!=typeof window&&"undefined"!=typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new r.DOMStorageWrapper(t)}}catch(e){}return new i.MemoryStorage};t.PersistentStorage=o("localStorage"),t.SessionStorage=o("sessionStorage")},UcKF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROTOCOL_VERSION="5",t.VERSION_PARAM="v",t.TRANSPORT_SESSION_PARAM="s",t.REFERER_PARAM="r",t.FORGE_REF="f",t.FORGE_DOMAIN="firebaseio.com",t.LAST_SESSION_PARAM="ls",t.WEBSOCKET="websocket",t.LONG_POLLING="long_polling"},VzZx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("JEJ4"),o=n("5pXs"),l=n("GnQ5"),a=n("fvGz"),s=n("hkXn"),u=n("/fob"),c=n("F1yO"),h=n("ZGn5"),d=n("xfHL"),p=n("JEJ4"),_=n("43Go"),f=n("R3TC"),y=n("pHuv");(v=r=t.TransactionStatus||(t.TransactionStatus={}))[v.RUN=0]="RUN",v[v.SENT=1]="SENT",v[v.COMPLETED=2]="COMPLETED",v[v.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",v[v.NEEDS_ABORT=4]="NEEDS_ABORT";var v;y.Repo.MAX_TRANSACTION_RETRIES_=25,y.Repo.prototype.transactions_init_=function(){this.transactionQueueTree_=new s.Tree},y.Repo.prototype.startTransaction=function(e,t,n,a){this.log_("transaction on "+e);var s=function(){},y=new o.Reference(this,e);y.on("value",s);var v={path:e,update:t,onComplete:n,status:null,order:c.LUIDGenerator(),applyLocally:a,retryCount:0,unwatcher:function(){y.off("value",s)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},g=this.getLatestState_(e);v.currentInputSnapshot=g;var m=v.update(g.val());if(void 0===m){if(v.unwatcher(),v.currentOutputSnapshotRaw=null,v.currentOutputSnapshotResolved=null,v.onComplete){var C=new l.DataSnapshot(v.currentInputSnapshot,new o.Reference(this,v.path),u.PRIORITY_INDEX);v.onComplete(null,!1,C)}}else{d.validateFirebaseData("transaction failed: Data returned ",m,v.path),v.status=r.RUN;var b=this.transactionQueueTree_.subTree(e),E=b.getValue()||[];E.push(v),b.setValue(E);var w=void 0;"object"==typeof m&&null!==m&&p.contains(m,".priority")?(w=p.safeGet(m,".priority"),i.assert(d.isValidPriority(w),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):w=(this.serverSyncTree_.calcCompleteEventCache(e)||f.ChildrenNode.EMPTY_NODE).getPriority().val(),w=w;var S=this.generateServerValues(),P=_.nodeFromJSON(m,w),N=h.resolveDeferredValueSnapshot(P,S);v.currentOutputSnapshotRaw=P,v.currentOutputSnapshotResolved=N,v.currentWriteId=this.getNextWriteId_();var T=this.serverSyncTree_.applyUserOverwrite(e,N,v.currentWriteId,v.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,T),this.sendReadyTransactions_()}},y.Repo.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||f.ChildrenNode.EMPTY_NODE},y.Repo.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);i.assert(n.length>0,"Sending zero length transaction queue"),n.every(function(e){return e.status===r.RUN})&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild(function(e){t.sendReadyTransactions_(e)})},y.Repo.prototype.sendTransactionQueue_=function(e,t){for(var n=this,s=t.map(function(e){return e.currentWriteId}),h=this.getLatestState_(e,s),d=h,p=h.hash(),_=0;_<t.length;_++){var f=t[_];i.assert(f.status===r.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=r.SENT,f.retryCount++;var y=a.Path.relativePath(e,f.path);d=d.updateChild(y,f.currentOutputSnapshotRaw)}var v=d.val(!0),g=e;this.server_.put(g.toString(),v,function(i){n.log_("transaction put response",{path:g.toString(),status:i});var a=[];if("ok"===i){for(var s=[],h=0;h<t.length;h++){if(t[h].status=r.COMPLETED,a=a.concat(n.serverSyncTree_.ackUserWrite(t[h].currentWriteId)),t[h].onComplete){var d=t[h].currentOutputSnapshotResolved,p=new o.Reference(n,t[h].path),_=new l.DataSnapshot(d,p,u.PRIORITY_INDEX);s.push(t[h].onComplete.bind(null,null,!0,_))}t[h].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(e,a),h=0;h<s.length;h++)c.exceptionGuard(s[h])}else{if("datastale"===i)for(h=0;h<t.length;h++)t[h].status=t[h].status===r.SENT_NEEDS_ABORT?r.NEEDS_ABORT:r.RUN;else for(c.warn("transaction at "+g.toString()+" failed: "+i),h=0;h<t.length;h++)t[h].status=r.NEEDS_ABORT,t[h].abortReason=i;n.rerunTransactions_(e)}},p)},y.Repo.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},y.Repo.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n=[],s=[],f=e.filter(function(e){return e.status===r.RUN}).map(function(e){return e.currentWriteId}),v=0;v<e.length;v++){var g=e[v],m=a.Path.relativePath(t,g.path),C=!1,b=void 0;if(i.assert(null!==m,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===r.NEEDS_ABORT)C=!0,b=g.abortReason,s=s.concat(this.serverSyncTree_.ackUserWrite(g.currentWriteId,!0));else if(g.status===r.RUN)if(g.retryCount>=y.Repo.MAX_TRANSACTION_RETRIES_)C=!0,b="maxretry",s=s.concat(this.serverSyncTree_.ackUserWrite(g.currentWriteId,!0));else{var E=this.getLatestState_(g.path,f);g.currentInputSnapshot=E;var w=e[v].update(E.val());if(void 0!==w){d.validateFirebaseData("transaction failed: Data returned ",w,g.path);var S=_.nodeFromJSON(w);"object"==typeof w&&null!=w&&p.contains(w,".priority")||(S=S.updatePriority(E.getPriority()));var P=g.currentWriteId,N=this.generateServerValues(),T=h.resolveDeferredValueSnapshot(S,N);g.currentOutputSnapshotRaw=S,g.currentOutputSnapshotResolved=T,g.currentWriteId=this.getNextWriteId_(),f.splice(f.indexOf(P),1),s=(s=s.concat(this.serverSyncTree_.applyUserOverwrite(g.path,T,g.currentWriteId,g.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(P,!0))}else C=!0,b="nodata",s=s.concat(this.serverSyncTree_.ackUserWrite(g.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,s),s=[],C&&(e[v].status=r.COMPLETED,setTimeout(e[v].unwatcher,Math.floor(0)),e[v].onComplete))if("nodata"===b){var O=new o.Reference(this,e[v].path),I=new l.DataSnapshot(e[v].currentInputSnapshot,O,u.PRIORITY_INDEX);n.push(e[v].onComplete.bind(null,null,!1,I))}else n.push(e[v].onComplete.bind(null,new Error(b),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),v=0;v<n.length;v++)c.exceptionGuard(n[v]);this.sendReadyTransactions_()}},y.Repo.prototype.getAncestorTransactionNode_=function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront();return n},y.Repo.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort(function(e,t){return e.order-t.order}),t},y.Repo.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var i=0;i<r.length;i++)t.push(r[i]);e.forEachChild(function(e){n.aggregateTransactionQueuesForNode_(e,t)})},y.Repo.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var i=0,o=0;o<n.length;o++)n[o].status!==r.COMPLETED&&(n[i]=n[o],i++);n.length=i,e.setValue(n.length>0?n:null)}e.forEachChild(function(e){t.pruneCompletedTransactionsBelowNode_(e)})},y.Repo.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor(function(e){t.abortTransactionsOnNode_(e)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(e){t.abortTransactionsOnNode_(e)}),n},y.Repo.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],o=[],l=-1,a=0;a<t.length;a++)t[a].status===r.SENT_NEEDS_ABORT||(t[a].status===r.SENT?(i.assert(l===a-1,"All SENT items should be at beginning of queue."),l=a,t[a].status=r.SENT_NEEDS_ABORT,t[a].abortReason="set"):(i.assert(t[a].status===r.RUN,"Unexpected transaction status in abort"),t[a].unwatcher(),o=o.concat(this.serverSyncTree_.ackUserWrite(t[a].currentWriteId,!0)),t[a].onComplete&&n.push(t[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===l?e.setValue(null):t.length=l+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),o),a=0;a<n.length;a++)c.exceptionGuard(n[a])}}},W4Cj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4"),i=n("ertD"),o=n("R3TC"),l=n("/fob");t.IndexedFilter=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,o,l,a){r.assert(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=e.getImmediateChild(t);return s.getChild(o).equals(n.getChild(o))&&s.isEmpty()==n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(i.Change.childRemovedChange(t,s)):r.assert(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(i.Change.childAddedChange(t,n)):a.trackChildChange(i.Change.childChangedChange(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(l.PRIORITY_INDEX,function(e,r){t.hasChild(e)||n.trackChildChange(i.Change.childRemovedChange(e,r))}),t.isLeafNode()||t.forEachChild(l.PRIORITY_INDEX,function(t,r){if(e.hasChild(t)){var o=e.getImmediateChild(t);o.equals(r)||n.trackChildChange(i.Change.childChangedChange(t,r,o))}else n.trackChildChange(i.Change.childAddedChange(t,r))})),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?o.ChildrenNode.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}()},XiwH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("W4Cj"),i=n("/fob"),o=n("p+VM"),l=n("R3TC");t.RangedFilter=function(){function e(t){this.indexedFilter_=new r.IndexedFilter(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,a){return this.matches(new o.NamedNode(t,n))||(n=l.ChildrenNode.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=l.ChildrenNode.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(l.ChildrenNode.EMPTY_NODE);var a=this;return t.forEachChild(i.PRIORITY_INDEX,function(e,t){a.matches(new o.NamedNode(e,t))||(r=r.updateImmediateChild(e,l.ChildrenNode.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}()},YY8E:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4");t.EventEmitter=function(){function e(e){this.allowedEvents_=e,this.listeners_={},r.assert(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=this.listeners_[e].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){r.assert(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},e}()},ZGn5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4"),i=n("fvGz"),o=n("z8+r"),l=n("04zk"),a=n("43Go"),s=n("/fob");t.generateWithValues=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},t.resolveDeferredValue=function(e,t){return e&&"object"==typeof e?(r.assert(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e},t.resolveDeferredValueTree=function(e,n){var r=new o.SparseSnapshotTree;return e.forEachTree(new i.Path(""),function(e,i){r.remember(e,t.resolveDeferredValueSnapshot(i,n))}),r},t.resolveDeferredValueSnapshot=function(e,n){var r,i=e.getPriority().val(),o=t.resolveDeferredValue(i,n);if(e.isLeafNode()){var u=e,c=t.resolveDeferredValue(u.getValue(),n);return c!==u.getValue()||o!==u.getPriority().val()?new l.LeafNode(c,a.nodeFromJSON(o)):e}var h=e;return r=h,o!==h.getPriority().val()&&(r=r.updatePriority(new l.LeafNode(o))),h.forEachChild(s.PRIORITY_INDEX,function(e,i){var o=t.resolveDeferredValueSnapshot(i,n);o!==i&&(r=r.updateImmediateChild(e,o))}),r}},b5Wm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("JEJ4"),o=n("2BLv"),l=n("JEJ4"),a=n("p+VM"),s=n("/fob"),u=n("stu6"),c={};t.IndexMap=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return i.assert(c&&s.PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),r=r||new e({".priority":c},{".priority":s.PRIORITY_INDEX})},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=l.safeGet(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t===c?null:t},e.prototype.hasIndex=function(e){return l.contains(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){i.assert(t!==u.KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],s=!1,h=n.getIterator(a.NamedNode.Wrap),d=h.getNext();d;)s=s||t.isDefinedOn(d.node),r.push(d),d=h.getNext();var p;p=s?o.buildChildSet(r,t.getCompare()):c;var _=t.toString(),f=l.clone(this.indexSet_);f[_]=t;var y=l.clone(this.indexes_);return y[_]=p,new e(y,f)},e.prototype.addToIndexes=function(t,n){var r=this;return new e(l.map(this.indexes_,function(e,s){var u=l.safeGet(r.indexSet_,s);if(i.assert(u,"Missing index implementation for "+s),e===c){if(u.isDefinedOn(t.node)){for(var h=[],d=n.getIterator(a.NamedNode.Wrap),p=d.getNext();p;)p.name!=t.name&&h.push(p),p=d.getNext();return h.push(t),o.buildChildSet(h,u.getCompare())}return c}var _=n.get(t.name),f=e;return _&&(f=f.remove(new a.NamedNode(t.name,_))),f.insert(t,t.node)}),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(l.map(this.indexes_,function(e){if(e===c)return e;var r=n.get(t.name);return r?e.remove(new a.NamedNode(t.name,r)):e}),this.indexSet_)},e}()},bN85:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("R3TC"),i=n("y8hQ");t.ViewCache=function(){function e(e,t){this.eventCache_=e,this.serverCache_=t}return e.prototype.updateEventSnap=function(t,n,r){return new e(new i.CacheNode(t,n,r),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,r){return new e(this.eventCache_,new i.CacheNode(t,n,r))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e.Empty=new e(new i.CacheNode(r.ChildrenNode.EMPTY_NODE,!1,!1),new i.CacheNode(r.ChildrenNode.EMPTY_NODE,!1,!1)),e}()},cm6g:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("/HC2");t.StatsManager=function(){function e(){}return e.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new r.StatsCollection),this.collections_[t]},e.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},e.collections_={},e.reporters_={},e}()},dVae:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("isNy"),o=n("fvGz"),l=n("F1yO"),a=n("JEJ4"),s=function(){return r||(r=new i.SortedMap(l.stringCompare)),r};t.ImmutableTree=function(){function e(e,t){void 0===t&&(t=s()),this.value=e,this.children=t}return e.fromObject=function(t){var n=e.Empty;return a.forEach(t,function(e,t){n=n.set(new o.Path(e),t)}),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:o.Path.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(e.popFront(),t);return null!=i?{path:new o.Path(n).child(i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},e.prototype.subtree=function(t){if(t.isEmpty())return this;var n=t.getFront(),r=this.children.get(n);return null!==r?r.subtree(t.popFront()):e.Empty},e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children);var r=t.getFront(),i=(this.children.get(r)||e.Empty).set(t.popFront(),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?e.Empty:new e(null,this.children);var n=t.getFront(),r=this.children.get(n);if(r){var i=r.remove(t.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?e.Empty:new e(this.value,o)}return this},e.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},e.prototype.setTree=function(t,n){if(t.isEmpty())return n;var r=t.getFront(),i=(this.children.get(r)||e.Empty).setTree(t.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,o)},e.prototype.fold=function(e){return this.fold_(o.Path.Empty,e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(e.child(r),t)}),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,o.Path.Empty,t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(e.isEmpty())return null;var i=e.getFront(),o=this.children.get(i);return o?o.findOnPath_(e.popFront(),t.child(i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,o.Path.Empty,t)},e.prototype.foreachOnPath_=function(t,n,r){if(t.isEmpty())return this;this.value&&r(n,this.value);var i=t.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(t.popFront(),n.child(i),r):e.Empty},e.prototype.foreach=function(e){this.foreach_(o.Path.Empty,e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal(function(n,r){r.foreach_(e.child(n),t)}),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal(function(t,n){n.value&&e(t,n.value)})},e.Empty=new e(null),e}()},ertD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Change=function(){function e(e,t,n,r,i){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=i}return e.valueChange=function(t){return new e(e.VALUE,t)},e.childAddedChange=function(t,n){return new e(e.CHILD_ADDED,n,t)},e.childRemovedChange=function(t,n){return new e(e.CHILD_REMOVED,n,t)},e.childChangedChange=function(t,n,r){return new e(e.CHILD_CHANGED,n,t,r)},e.childMovedChange=function(t,n){return new e(e.CHILD_MOVED,n,t)},e.CHILD_ADDED="child_added",e.CHILD_REMOVED="child_removed",e.CHILD_CHANGED="child_changed",e.CHILD_MOVED="child_moved",e.VALUE="value",e}()},fvGz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("F1yO"),i=n("JEJ4");t.Path=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(e,"Empty",{get:function(){return new e("")},enumerable:!0,configurable:!0}),e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},e.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new e(this.pieces_,t)},e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},e.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)},e.prototype.child=function(t){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(t instanceof e)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new e(n,0)},e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},e.relativePath=function(t,n){var r=t.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return e.relativePath(t.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")},e.comparePaths=function(e,t){for(var n=e.slice(),i=t.slice(),o=0;o<n.length&&o<i.length;o++){var l=r.nameCompare(n[o],i[o]);if(0!==l)return l}return n.length===i.length?0:n.length<i.length?-1:1},e.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},e.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},e}(),t.ValidationPath=function(){function e(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=i.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=i.stringLength(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=i.stringLength(e),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}()},gOHv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4");(i=t.OperationType||(t.OperationType={}))[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var i;t.OperationSource=function(){function e(e,t,n,i){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=i,r.assert(!i||t,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}()},hQ4o:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("F1yO");t.PacketReceiver=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var i=function(){var e=o.pendingResponses[o.currentResponseNum];delete o.pendingResponses[o.currentResponseNum];for(var t=function(t){e[t]&&r.exceptionGuard(function(){n.onMessage_(e[t])})},i=0;i<e.length;++i)t(i);if(o.currentResponseNum===o.closeAfterResponse)return o.onClose&&(o.onClose(),o.onClose=null),"break";o.currentResponseNum++},o=this;this.pendingResponses[this.currentResponseNum]&&"break"!==i(););},e}()},hkXn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4"),i=n("fvGz"),o=n("JEJ4"),l=function(){this.children={},this.childCount=0,this.value=null};t.TreeNode=l,t.Tree=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new l),this.name_=e,this.parent_=t,this.node_=n}return e.prototype.subTree=function(t){for(var n,r=t instanceof i.Path?t:new i.Path(t),a=this;null!==(n=r.getFront());)a=new e(n,a,o.safeGet(a.node_.children,n)||new l),r=r.popFront();return a},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(e){r.assert("undefined"!=typeof e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;o.forEach(this.node_.children,function(r,i){t(new e(r,n,i))})},e.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},e.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},e.prototype.path=function(){return new i.Path(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=o.contains(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},e}()},isNy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}();t.SortedMapIterator=r;var i=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:l.EMPTY_NODE,this.right=null!=o?o:l.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r,i;return(i=(r=n(e,(i=this).key))<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return l.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return l.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){var e;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((e=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}();t.LLRBNode=i;var o=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new i(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}();t.LLRBEmptyNode=o;var l=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,i.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,i.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new r(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new r(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new r(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new r(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new o,e}();t.SortedMap=l},j0qB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("F1yO"),i=n("Rgd9"),o=n("UcKF"),l=n("FGYS");t.Connection=function(){function e(e,t,n,i,o,a,s){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=r.logWrapper("c:"+this.id+":"),this.transportManager_=new l.TransportManager(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,i)},Math.floor(0));var o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=r.setTimeoutNonBlocking(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(o)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!=t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){this.sendData_({t:"d",d:e})},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=r.requireKey("t",e),n=r.requireKey("d",e);if("c"==t)this.onSecondaryControl_(n);else{if("d"!=t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=r.requireKey("t",e),n=r.requireKey("d",e);"c"==t?this.onControl_(n):"d"==t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=r.requireKey("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?r.error("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):r.error("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(i),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),o.PROTOCOL_VERSION!==n&&r.warn("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),r.setTimeoutNonBlocking(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):r.setTimeoutNonBlocking(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(i.PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}()},j3M3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("R3TC");t.SnapshotHolder=function(){function e(){this.rootNode_=r.ChildrenNode.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}()},kCHx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("gOHv"),i=n("fvGz");t.Overwrite=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=r.OperationType.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,i.Path.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}()},lDZL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("F1yO");t.EventQueue=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],o=r.getPath();null===t||o.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new i(o)),t.add(r)}t&&this.eventLists_.push(t)},e.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},e.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},e.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(e(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1)}t&&(this.eventLists_=[]),this.recursionDepth_--},e}();var i=function(){function e(e){this.path_=e,this.events_=[]}return e.prototype.add=function(e){this.events_.push(e)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();r.logger&&r.log("event: "+t.toString()),r.exceptionGuard(n)}}},e.prototype.getPath=function(){return this.path_},e}();t.EventList=i},mZoP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4"),i=n("JEJ4"),o=n("Rgd9"),l=n("UcKF");t.RepoInfo=function(){function e(e,t,n,r,i){void 0===i&&(i=""),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=o.PersistentStorage.get("host:"+e)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost},e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},e.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&o.PersistentStorage.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(e,t){r.assert("string"==typeof e,"typeof type must == string"),r.assert("object"==typeof t,"typeof params must == object");var n;if(e===l.WEBSOCKET)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(e!==l.LONG_POLLING)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var o=[];return i.forEach(t,function(e,t){o.push(e+"="+t)}),n+o.join("&")},e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},e}()},miEe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4"),i=n("F1yO"),o=n("stu6"),l=n("/fob"),a=n("Nq7v"),s=n("G0Qy"),u=n("W4Cj"),c=n("n3qp"),h=n("XiwH"),d=n("JEJ4");t.QueryParams=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=l.PRIORITY_INDEX}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},e.prototype.getIndexStartValue=function(){return r.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return r.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:i.MIN_NAME},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return r.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return r.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:i.MAX_NAME},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return r.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.copy_=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},e.prototype.limitToFirst=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},e.prototype.limitToLast=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},e.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},e.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},e.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[t.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),n[t.VIEW_FROM]=r}return this.index_!==l.PRIORITY_INDEX&&(n[t.INDEX]=this.index_.toString()),n},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==l.PRIORITY_INDEX},e.prototype.getNodeFilter=function(){return this.loadsAllData()?new u.IndexedFilter(this.getIndex()):this.hasLimit()?new c.LimitedFilter(this):new h.RangedFilter(this)},e.prototype.toRestQueryStringParameters=function(){var t=e.REST_QUERY_CONSTANTS_,n={};if(this.isDefault())return n;var i;return this.index_===l.PRIORITY_INDEX?i=t.PRIORITY_INDEX:this.index_===a.VALUE_INDEX?i=t.VALUE_INDEX:this.index_===o.KEY_INDEX?i=t.KEY_INDEX:(r.assert(this.index_ instanceof s.PathIndex,"Unrecognized index type!"),i=this.index_.toString()),n[t.ORDER_BY]=d.stringify(i),this.startSet_&&(n[t.START_AT]=d.stringify(this.indexStartValue_),this.startNameSet_&&(n[t.START_AT]+=","+d.stringify(this.indexStartName_))),this.endSet_&&(n[t.END_AT]=d.stringify(this.indexEndValue_),this.endNameSet_&&(n[t.END_AT]+=","+d.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[t.LIMIT_TO_FIRST]=this.limit_:n[t.LIMIT_TO_LAST]=this.limit_),n},e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},e.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},e.DEFAULT=new e,e}()},n3qp:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("XiwH"),i=n("R3TC"),o=n("p+VM"),l=n("JEJ4"),a=n("ertD");t.LimitedFilter=function(){function e(e){this.rangedFilter_=new r.RangedFilter(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,l,a){return this.rangedFilter_.matches(new o.NamedNode(t,n))||(n=i.ChildrenNode.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,l,a):this.fullLimitUpdateChild_(e,t,n,l,a)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=i.ChildrenNode.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=i.ChildrenNode.EMPTY_NODE.withIndex(this.index_);var o=void 0;o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var l=0;o.hasNext()&&l<this.limit_;){var a=o.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),l++}}else{r=(r=t.withIndex(this.index_)).updatePriority(i.ChildrenNode.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(o=void 0,this.reverse_){o=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else o=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();l=0;for(var d=!1;o.hasNext();)a=o.getNext(),!d&&c(s,a)<=0&&(d=!0),d&&l<this.limit_&&c(a,u)<=0?l++:r=r.updateImmediateChild(a.name,i.ChildrenNode.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,s){var u;if(this.reverse_){var c=this.index_.getCompare();u=function(e,t){return c(t,e)}}else u=this.index_.getCompare();var h=e;l.assert(h.numChildren()==this.limit_,"");var d=new o.NamedNode(t,n),p=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),_=this.rangedFilter_.matches(d);if(h.hasChild(t)){for(var f=h.getImmediateChild(t),y=r.getChildAfterChild(this.index_,p,this.reverse_);null!=y&&(y.name==t||h.hasChild(y.name));)y=r.getChildAfterChild(this.index_,y,this.reverse_);var v=null==y?1:u(y,d);if(_&&!n.isEmpty()&&v>=0)return null!=s&&s.trackChildChange(a.Change.childChangedChange(t,n,f)),h.updateImmediateChild(t,n);null!=s&&s.trackChildChange(a.Change.childRemovedChange(t,f));var g=h.updateImmediateChild(t,i.ChildrenNode.EMPTY_NODE);return null!=y&&this.rangedFilter_.matches(y)?(null!=s&&s.trackChildChange(a.Change.childAddedChange(y.name,y.node)),g.updateImmediateChild(y.name,y.node)):g}return n.isEmpty()?e:_&&u(p,d)>=0?(null!=s&&(s.trackChildChange(a.Change.childRemovedChange(p.name,p.node)),s.trackChildChange(a.Change.childAddedChange(t,n))),h.updateImmediateChild(t,n).updateImmediateChild(p.name,i.ChildrenNode.EMPTY_NODE)):e},e}()},opdF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4");t.StatsListener=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=r.clone(e);return this.last_&&r.forEach(this.last_,function(e,n){t[e]=t[e]-n}),this.last_=e,t},e}()},oyal:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4"),i=n("xfHL"),o=n("F1yO"),l=n("JEJ4");t.OnDisconnect=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){r.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),r.validateCallback("OnDisconnect.cancel",1,e,!0);var t=new l.Deferred;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){r.validateArgCount("OnDisconnect.remove",0,1,arguments.length),i.validateWritablePath("OnDisconnect.remove",this.path_),r.validateCallback("OnDisconnect.remove",1,e,!0);var t=new l.Deferred;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){r.validateArgCount("OnDisconnect.set",1,2,arguments.length),i.validateWritablePath("OnDisconnect.set",this.path_),i.validateFirebaseDataArg("OnDisconnect.set",1,e,this.path_,!1),r.validateCallback("OnDisconnect.set",2,t,!0);var n=new l.Deferred;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){r.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),i.validateWritablePath("OnDisconnect.setWithPriority",this.path_),i.validateFirebaseDataArg("OnDisconnect.setWithPriority",1,e,this.path_,!1),i.validatePriority("OnDisconnect.setWithPriority",2,t,!1),r.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var o=new l.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,o.wrapCallback(n)),o.promise},e.prototype.update=function(e,t){if(r.validateArgCount("OnDisconnect.update",1,2,arguments.length),i.validateWritablePath("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},a=0;a<e.length;++a)n[""+a]=e[a];e=n,o.warn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}i.validateFirebaseMergeDataArg("OnDisconnect.update",1,e,this.path_,!1),r.validateCallback("OnDisconnect.update",2,t,!0);var s=new l.Deferred;return this.repo_.onDisconnectUpdate(this.path_,e,s.wrapCallback(t)),s.promise},e}()},"p+VM":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamedNode=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}()},pHuv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("ZGn5"),i=n("43Go"),o=n("fvGz"),l=n("z8+r"),a=n("Htcq"),s=n("j3M3"),u=n("JEJ4"),c=n("F1yO"),h=n("JEJ4"),d=n("phte"),p=n("cm6g"),_=n("zPe/"),f=n("opdF"),y=n("lDZL"),v=n("xhf5"),g=n("6oqh"),m=n("8UuO");t.Repo=function(){function e(e,t,n){var r=this;this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new y.EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new l.SparseSnapshotTree,this.persistentConnection_=null;var i=new d.AuthTokenProvider(n);if(this.stats_=p.StatsManager.getCollection(e),t||c.beingCrawled())this.server_=new g.ReadonlyRestClient(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if("undefined"!=typeof o&&null!==o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{u.stringify(o)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}this.persistentConnection_=new v.PersistentConnection(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(e){r.server_.refreshAuthToken(e)}),this.statsReporter_=p.StatsManager.getOrCreateReporter(e,function(){return new _.StatsReporter(r.stats_,r.server_)}),this.transactions_init_(),this.infoData_=new s.SnapshotHolder,this.infoSyncTree_=new a.SyncTree({startListening:function(e,t,n,i){var o=[],l=r.infoData_.getNode(e.path);return l.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(e.path,l),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new a.SyncTree({startListening:function(e,t,n,i){return r.server_.listen(e,n,t,function(t,n){var o=i(t,n);r.eventQueue_.raiseEventsForChangedPath(e.path,o)}),[]},stopListening:function(e,t){r.server_.unlisten(e,t)}})}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var e=this.infoData_.getNode(new o.Path(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},e.prototype.generateServerValues=function(){return r.generateWithValues({timestamp:this.serverTime()})},e.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var l=new o.Path(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var a=[];if(r)if(n){var s=h.map(t,function(e){return i.nodeFromJSON(e)});a=this.serverSyncTree_.applyTaggedQueryMerge(l,s,r)}else{var u=i.nodeFromJSON(t);a=this.serverSyncTree_.applyTaggedQueryOverwrite(l,u,r)}else if(n){var c=h.map(t,function(e){return i.nodeFromJSON(e)});a=this.serverSyncTree_.applyServerMerge(l,c)}else{var d=i.nodeFromJSON(t);a=this.serverSyncTree_.applyServerOverwrite(l,d)}var p=l;a.length>0&&(p=this.rerunTransactions_(l)),this.eventQueue_.raiseEventsForChangedPath(p,a)},e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},e.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(e){var t=this;c.each(e,function(e,n){t.updateInfo_(n,e)})},e.prototype.updateInfo_=function(e,t){var n=new o.Path("/.info/"+e),r=i.nodeFromJSON(t);this.infoData_.updateSnapshot(n,r);var l=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,l)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.setWithPriority=function(e,t,n,o){var l=this;this.log_("set",{path:e.toString(),value:t,priority:n});var a=this.generateServerValues(),s=i.nodeFromJSON(t,n),u=r.resolveDeferredValueSnapshot(s,a),h=this.getNextWriteId_(),d=this.serverSyncTree_.applyUserOverwrite(e,u,h,!0);this.eventQueue_.queueEvents(d),this.server_.put(e.toString(),s.val(!0),function(t,n){var r="ok"===t;r||c.warn("set at "+e+" failed: "+t);var i=l.serverSyncTree_.ackUserWrite(h,!r);l.eventQueue_.raiseEventsForChangedPath(e,i),l.callOnCompleteCallback(o,t,n)});var p=this.abortTransactions_(e);this.rerunTransactions_(p),this.eventQueue_.raiseEventsForChangedPath(p,[])},e.prototype.update=function(e,t,n){var o=this;this.log_("update",{path:e.toString(),value:t});var l=!0,a=this.generateServerValues(),s={};if(h.forEach(t,function(e,t){l=!1;var n=i.nodeFromJSON(t);s[e]=r.resolveDeferredValueSnapshot(n,a)}),l)c.log("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var u=this.getNextWriteId_(),d=this.serverSyncTree_.applyUserMerge(e,s,u);this.eventQueue_.queueEvents(d),this.server_.merge(e.toString(),t,function(t,r){var i="ok"===t;i||c.warn("update at "+e+" failed: "+t);var l=o.serverSyncTree_.ackUserWrite(u,!i),a=l.length>0?o.rerunTransactions_(e):e;o.eventQueue_.raiseEventsForChangedPath(a,l),o.callOnCompleteCallback(n,t,r)}),h.forEach(t,function(t){var n=o.abortTransactions_(e.child(t));o.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(e,[])}},e.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),n=[];r.resolveDeferredValueTree(this.onDisconnect_,t).forEachTree(o.Path.Empty,function(t,r){n=n.concat(e.serverSyncTree_.applyServerOverwrite(t,r));var i=e.abortTransactions_(t);e.rerunTransactions_(i)}),this.onDisconnect_=new l.SparseSnapshotTree,this.eventQueue_.raiseEventsForChangedPath(o.Path.Empty,n)},e.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,i)})},e.prototype.onDisconnectSet=function(e,t,n){var r=this,o=i.nodeFromJSON(t);this.server_.onDisconnectPut(e.toString(),o.val(!0),function(t,i){"ok"===t&&r.onDisconnect_.remember(e,o),r.callOnCompleteCallback(n,t,i)})},e.prototype.onDisconnectSetWithPriority=function(e,t,n,r){var o=this,l=i.nodeFromJSON(t,n);this.server_.onDisconnectPut(e.toString(),l.val(!0),function(t,n){"ok"===t&&o.onDisconnect_.remember(e,l),o.callOnCompleteCallback(r,t,n)})},e.prototype.onDisconnectUpdate=function(e,t,n){var r=this;if(h.isEmpty(t))return c.log("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(e.toString(),t,function(o,l){"ok"===o&&h.forEach(t,function(t,n){var o=i.nodeFromJSON(n);r.onDisconnect_.remember(e.child(t),o)}),r.callOnCompleteCallback(n,o,l)})},e.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},e.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;e?(this.statsListener_||(this.statsListener_=new f.StatsListener(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=Object.keys(t).reduce(function(e,t){return Math.max(t.length,e)},0);h.forEach(t,function(e,t){for(var r=e.length;r<n+2;r++)e+=" ";console.log(e+t)})}},e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),c.log.apply(void 0,[n].concat(e))},e.prototype.callOnCompleteCallback=function(e,t,n){e&&c.exceptionGuard(function(){if("ok"==t)e(null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,e(o)}})},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new m.Database(this))},enumerable:!0,configurable:!0}),e}()},phte:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("F1yO");t.AuthTokenProvider=function(){function e(e){this.app_=e}return e.prototype.getToken=function(e){return this.app_.INTERNAL.getToken(e).then(null,function(e){return e&&"auth/token-not-initialized"===e.code?(r.log("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})},e.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},e.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';r.warn(e+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},e}()},qYrH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("F1yO"),i=n("r9Yg"),o=n("cm6g"),l=n("hQ4o"),a=n("UcKF"),s=n("JEJ4"),u=n("JEJ4");t.FIREBASE_LONGPOLL_START_PARAM="start",t.FIREBASE_LONGPOLL_CLOSE_COMMAND="close",t.FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",t.FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",t.FIREBASE_LONGPOLL_ID_PARAM="id",t.FIREBASE_LONGPOLL_PW_PARAM="pw",t.FIREBASE_LONGPOLL_SERIAL_PARAM="ser",t.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",t.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",t.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",t.FIREBASE_LONGPOLL_DATA_PARAM="d",t.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM="disconn",t.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe",t.BrowserPollConnection=function(){function e(e,t,n,i){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=r.logWrapper(e),this.stats_=o.StatsManager.getCollection(t),this.urlFn=function(e){return t.connectionURL(a.LONG_POLLING,e)}}return e.prototype.open=function(e,n){var i=this;this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new l.PacketReceiver(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){i.log_("Timed out trying to connect."),i.onClosed_(),i.connectTimeoutTimer_=null},Math.floor(3e4)),r.executeWhenDOMReady(function(){if(!i.isClosed_){i.scriptTagHolder=new c(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],o=e[1],l=e[2];if(i.incrementIncomingBytes_(e),i.scriptTagHolder)if(i.connectTimeoutTimer_&&(clearTimeout(i.connectTimeoutTimer_),i.connectTimeoutTimer_=null),i.everConnected_=!0,r==t.FIREBASE_LONGPOLL_START_PARAM)i.id=o,i.password=l;else{if(r!==t.FIREBASE_LONGPOLL_CLOSE_COMMAND)throw new Error("Unrecognized command received: "+r);o?(i.scriptTagHolder.sendNewPolls=!1,i.myPacketOrderer.closeAfter(o,function(){i.onClosed_()})):i.onClosed_()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];i.incrementIncomingBytes_(e),i.myPacketOrderer.handleResponse(n,r)},function(){i.onClosed_()},i.urlFn);var e={};e[t.FIREBASE_LONGPOLL_START_PARAM]="t",e[t.FIREBASE_LONGPOLL_SERIAL_PARAM]=Math.floor(1e8*Math.random()),i.scriptTagHolder.uniqueCallbackIdentifier&&(e[t.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM]=i.scriptTagHolder.uniqueCallbackIdentifier),e[a.VERSION_PARAM]=a.PROTOCOL_VERSION,i.transportSessionId&&(e[a.TRANSPORT_SESSION_PARAM]=i.transportSessionId),i.lastSessionId&&(e[a.LAST_SESSION_PARAM]=i.lastSessionId),!u.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(a.FORGE_DOMAIN)&&(e[a.REFERER_PARAM]=a.FORGE_REF);var n=i.urlFn(e);i.log_("Connecting via long-poll to "+n),i.scriptTagHolder.addTag(n,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return e.forceAllow_||!e.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!r.isChromeExtensionContentScript()&&!r.isWindowsStoreApp()&&!u.isNodeSdk()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=s.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=s.base64Encode(t),i=r.splitStringBySize(n,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,n){if(!u.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var r={};r[t.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM]="t",r[t.FIREBASE_LONGPOLL_ID_PARAM]=e,r[t.FIREBASE_LONGPOLL_PW_PARAM]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=s.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}();var c=function(){function e(n,o,l,a){if(this.onDisconnect=l,this.urlFn=a,this.outstandingRequests=new i.CountedSet,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,u.isNodeSdk())this.commandCB=n,this.onMessageCB=o;else{this.uniqueCallbackIdentifier=r.LUIDGenerator(),window[t.FIREBASE_LONGPOLL_COMMAND_CB_NAME+this.uniqueCallbackIdentifier]=n,window[t.FIREBASE_LONGPOLL_DATA_CB_NAME+this.uniqueCallbackIdentifier]=o,this.myIFrame=e.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(e){r.log("frame writing exception"),e.stack&&r.log(e.stack),r.log(e)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||r.log("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var n=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==n.myIFrame&&(document.body.removeChild(n.myIFrame),n.myIFrame=null)},Math.floor(0))),u.isNodeSdk()&&this.myID){var r={};r[t.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM]="t",r[t.FIREBASE_LONGPOLL_ID_PARAM]=this.myID,r[t.FIREBASE_LONGPOLL_PW_PARAM]=this.myPW;var i=this.urlFn(r);e.nodeRestRequest(i)}var o=this.onDisconnect;o&&(this.onDisconnect=null,o())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e[t.FIREBASE_LONGPOLL_ID_PARAM]=this.myID,e[t.FIREBASE_LONGPOLL_PW_PARAM]=this.myPW,e[t.FIREBASE_LONGPOLL_SERIAL_PARAM]=this.currentSerial;for(var n=this.urlFn(e),r="",i=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){var o=this.pendingSegs.shift();r=r+"&"+t.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM+i+"="+o.seg+"&"+t.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET+i+"="+o.ts+"&"+t.FIREBASE_LONGPOLL_DATA_PARAM+i+"="+o.d,i++}return this.addLongPollTag_(n+=r,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t,1);var r=function(){n.outstandingRequests.remove(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,function(){clearTimeout(i),r()})},e.prototype.addTag=function(e,t){var n=this;u.isNodeSdk()?this.doNodeLongPoll(e,t):setTimeout(function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){var e=i.readyState;e&&"loaded"!==e&&"complete"!==e||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=function(){r.log("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(e){}},Math.floor(1))},e}();t.FirebaseIFrameScriptHolder=c},r9Yg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4");t.CountedSet=function(){function e(){this.set={}}return e.prototype.add=function(e,t){this.set[e]=null===t||t},e.prototype.contains=function(e){return r.contains(this.set,e)},e.prototype.get=function(e){return this.contains(e)?this.set[e]:void 0},e.prototype.remove=function(e){delete this.set[e]},e.prototype.clear=function(){this.set={}},e.prototype.isEmpty=function(){return r.isEmpty(this.set)},e.prototype.count=function(){return r.getCount(this.set)},e.prototype.each=function(e){r.forEach(this.set,function(t,n){return e(t,n)})},e.prototype.keys=function(){var e=[];return r.forEach(this.set,function(t){e.push(t)}),e},e}()},rB9K:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("JEJ4"),o=n("stu6"),l=n("/fob"),a=n("Nq7v"),s=n("G0Qy"),u=n("F1yO"),c=n("fvGz"),h=n("xfHL"),d=n("JEJ4"),p=n("rtGJ"),_=n("JEJ4");t.Query=function(){function e(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return i.assert(r,"Reference.ts has not been loaded"),r},set:function(e){r=e},enumerable:!0,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===o.KEY_INDEX){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",c="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!=u.MIN_NAME)throw new Error(r);if("string"!=typeof t)throw new Error(c)}if(e.hasEnd()){if(e.getIndexEndName()!=u.MAX_NAME)throw new Error(r);if("string"!=typeof n)throw new Error(c)}}else if(e.getIndex()===l.PRIORITY_INDEX){if(null!=t&&!h.isValidPriority(t)||null!=n&&!h.isValidPriority(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(i.assert(e.getIndex()instanceof s.PathIndex||e.getIndex()===a.VALUE_INDEX,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return d.validateArgCount("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,i){d.validateArgCount("Query.on",2,4,arguments.length),h.validateEventType("Query.on",1,t,!1),d.validateCallback("Query.on",2,n,!1);var o=e.getCancelAndContextArgs_("Query.on",r,i);if("value"===t)this.onValueEvent(n,o.cancel,o.context);else{var l={};l[t]=n,this.onChildEvent(l,o.cancel,o.context)}return n},e.prototype.onValueEvent=function(e,t,n){var r=new p.ValueEventRegistration(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},e.prototype.onChildEvent=function(e,t,n){var r=new p.ChildEventRegistration(e,t,n);this.repo.addEventCallbackForQuery(this,r)},e.prototype.off=function(e,t,n){d.validateArgCount("Query.off",0,3,arguments.length),h.validateEventType("Query.off",1,e,!0),d.validateCallback("Query.off",2,t,!0),d.validateContextObject("Query.off",3,n,!0);var r=null,i=null;"value"===e?r=new p.ValueEventRegistration(t||null,null,n||null):e&&(t&&((i={})[e]=t),r=new p.ChildEventRegistration(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},e.prototype.once=function(t,n,r,i){var o=this;d.validateArgCount("Query.once",1,4,arguments.length),h.validateEventType("Query.once",1,t,!1),d.validateCallback("Query.once",2,n,!0);var l=e.getCancelAndContextArgs_("Query.once",r,i),a=!0,s=new _.Deferred;s.promise.catch(function(){});var u=function(e){a&&(a=!1,o.off(t,u),n&&n.bind(l.context)(e),s.resolve(e))};return this.on(t,u,function(e){o.off(t,u),l.cancel&&l.cancel.bind(l.context)(e),s.reject(e)}),s.promise},e.prototype.limitToFirst=function(t){if(d.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(d.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(d.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');h.validatePathString("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new c.Path(t);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new s.PathIndex(n),i=this.queryParams_.orderBy(r);return e.validateQueryEndpoints_(i),new e(this.repo,this.path,i,!0)},e.prototype.orderByKey=function(){d.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(o.KEY_INDEX);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){d.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(l.PRIORITY_INDEX);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){d.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(a.VALUE_INDEX);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),d.validateArgCount("Query.startAt",0,2,arguments.length),h.validateFirebaseDataArg("Query.startAt",1,t,this.path,!0),h.validateKey("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),d.validateArgCount("Query.endAt",0,2,arguments.length),h.validateFirebaseDataArg("Query.endAt",1,t,this.path,!0),h.validateKey("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if(d.validateArgCount("Query.equalTo",1,2,arguments.length),h.validateFirebaseDataArg("Query.equalTo",1,e,this.path,!1),h.validateKey("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return d.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},e.prototype.toJSON=function(){return d.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=u.ObjectToUniqueKey(e);return"{}"===t?"default":t},e.prototype.isEqual=function(t){if(d.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof e))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var n=this.repo===t.repo,r=this.path.equals(t.path),i=this.queryIdentifier()===t.queryIdentifier();return n&&r&&i},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,d.validateCallback(e,3,r.cancel,!0),r.context=n,d.validateContextObject(e,4,r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(d.errorPrefix(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}()},rbSf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4"),i=n("fvGz"),o=n("gOHv");t.AckUserWrite=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=o.OperationType.ACK_USER_WRITE,this.source=o.OperationSource.User}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return r.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new i.Path(t));return new e(i.Path.Empty,n,this.revert)}return r.assert(this.path.getFront()===t,"operationForChild called for unrelated child."),new e(this.path.popFront(),this.affectedTree,this.revert)},e}()},rtGJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("GnQ5"),i=n("A4jy"),o=n("JEJ4"),l=n("JEJ4");t.ValueEventRegistration=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new i.DataEvent("value",this,new r.DataSnapshot(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){l.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new i.CancelEvent(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),t.ChildEventRegistration=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return o.contains(this.callbacks_,t="children_removed"===t?"child_removed":t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new i.CancelEvent(this,e,t):null},e.prototype.createEvent=function(e,t){l.assert(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),o=t.getQueryParams().getIndex();return new i.DataEvent(e.type,this,new r.DataSnapshot(e.snapshotNode,n,o),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){l.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var n=o.getCount(t.callbacks_);if(n===o.getCount(this.callbacks_)){if(1===n){var r=o.getAnyKey(t.callbacks_),i=o.getAnyKey(this.callbacks_);return!(i!==r||t.callbacks_[r]&&this.callbacks_[i]&&t.callbacks_[r]!==this.callbacks_[i])}return o.every(this.callbacks_,function(e,n){return t.callbacks_[e]===n})}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}()},sZ8A:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4");t.nextPushId=function(){var e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t=0,n=[];return function(i){var o=i===t;t=i;var l,a=new Array(8);for(l=7;l>=0;l--)a[l]=e.charAt(i%64),i=Math.floor(i/64);r.assert(0===i,"Cannot push at time == 0");var s=a.join("");if(o){for(l=11;l>=0&&63===n[l];l--)n[l]=0;n[l]++}else for(l=0;l<12;l++)n[l]=Math.floor(64*Math.random());for(l=0;l<12;l++)s+=e.charAt(n[l]);return r.assert(20===s.length,"nextPushId: Length should be 20."),s}}()},srrO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("LMZF"),i=n("UHIZ"),o=function(){function e(e){var t=this;this.router=e,this.urlSubscription=this.router.events.filter(function(e){return e instanceof i.d}).subscribe(function(e){console.log(e),t.url=e.url?e.url.split("/")[3]:""})}return e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.urlSubscription.unsubscribe()},e}(),l=function(){function e(e){this.ds=e}return e.prototype.ngOnInit=function(){},e}(),a=function(){function e(e,t){var n=this;this.route=e,this.debate={titulo:"Titulo",estado:"",agenda:[],fecha:new Date},this.id=this.route.snapshot.params.id,this.debateSubscription=t.object("/punicipio/debates/"+this.id).valueChanges().subscribe(function(e){e&&(n.debate={titulo:e.titulo,estado:e.estado,agenda:e.agenda.split(";").map(function(e){return e.trim()}).filter(function(e){return!!e}),fecha:new Date(e.fecha)})})}return e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.debateSubscription.unsubscribe()},e}(),s=function(){function e(e){this.router=e}return e.prototype.logOut=function(){return this.router.navigate(["/login"]),!1},e.prototype.ngOnInit=function(){},e}(),u=function(){function e(e,t,n,r){this.db=e,this.router=t,this.route=n,this.debateForm=r.group({titulo:[""],agenda:[""],fecha:[new Date]})}return e.prototype.onSubmit=function(e){this.debateForm.disable(),this.db.list("/punicipio/debates").push({titulo:e.titulo,agenda:e.agenda,estado:"pendiente",fecha:e.fecha.toISOString()}),this.router.navigate(["../debates"],{relativeTo:this.route})},e.prototype.ngOnInit=function(){},e}(),c=function(){function e(e,t,n,r){var i=this;this.db=e,this.route=n,this.router=r,this.debateForm=t.group({titulo:[""],agenda:[""],fecha:[null]}),this.debateForm.disable(),this.debateSubscription=e.object("/punicipio/debates/"+this.route.snapshot.params.id).valueChanges().subscribe(function(e){i.debateForm.controls.titulo.setValue(e.titulo),i.debateForm.controls.agenda.setValue(e.agenda),i.debateForm.controls.fecha.setValue(new Date(e.fecha)),i.debateForm.enable()})}return e.prototype.onSubmit=function(e){var t=this;this.debateForm.disable(),this.db.object("/punicipio/debates/"+this.route.snapshot.params.id).update({titulo:e.titulo,agenda:e.agenda,fecha:e.fecha.toISOString()}).then(function(e){t.router.navigate(["../"],{relativeTo:t.route})}).catch(function(e){console.log("error"),t.debateForm.enable()})},e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.debateSubscription.unsubscribe()},e}(),h=function(){function e(){}return e.prototype.ngOnInit=function(){},e}(),d=function(){},p=n("k1En"),_=n("hzkV"),f=n("Ai99"),y=n("SMsG"),v=n("YXpL"),g=n("V8+5"),m=n("Un6q"),C=n("ESfO"),b=n("ghl+"),E=n("8Xfy"),w=n("yxpl"),S=n("vgc3"),P=r._1({encapsulation:0,styles:[[".remaining-space[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.cabecera[_ngcontent-%COMP%]{font-size:20px}.accion[_ngcontent-%COMP%]{padding:0 14px}"]],data:{}});function N(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Debates"]))],null,null)}function T(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Detalles"]))],null,null)}function O(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Usuario"]))],null,null)}function I(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Debate en curso"]))],null,null)}function R(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Debate en curso"]))],null,null)}function A(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Upp, 404"]))],null,null)}function F(e){return r._24(0,[(e()(),r._3(0,0,null,null,38,"mat-toolbar",[["class","mat-toolbar"],["color","primary"],["role","header"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,y.b,y.a)),r._2(1,4243456,null,1,v.a,[r.k,g.a],{color:[0,"color"]},null),r._20(603979776,1,{_toolbarRows:1}),(e()(),r._22(-1,0,["\n\n  "])),(e()(),r._3(4,0,null,0,20,"span",[["class","accion"]],null,null,null,null,null)),r._2(5,16384,null,0,m.n,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),r._22(-1,null,["\n    "])),(e()(),r.Y(16777216,null,null,1,null,N)),r._2(8,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n    "])),(e()(),r.Y(16777216,null,null,1,null,T)),r._2(11,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n    "])),(e()(),r.Y(16777216,null,null,1,null,O)),r._2(14,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n    "])),(e()(),r.Y(16777216,null,null,1,null,I)),r._2(17,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n    "])),(e()(),r.Y(16777216,null,null,1,null,R)),r._2(20,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n    "])),(e()(),r.Y(16777216,null,null,1,null,A)),r._2(23,16384,null,0,m.p,[r.M,r.J,m.n],null,null),(e()(),r._22(-1,null,["\n  "])),(e()(),r._22(-1,0,["\n\n  "])),(e()(),r._3(26,0,null,0,0,"span",[["class","remaining-space"]],null,null,null,null,null)),(e()(),r._22(-1,0,["\n  "])),(e()(),r._3(28,0,null,0,9,"a",[["class","cabecera mat-button"],["mat-button",""]],[[1,"target",0],[8,"href",4],[1,"tabindex",0],[1,"disabled",0],[1,"aria-disabled",0]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==r._16(e,29).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),"click"===t&&(i=!1!==r._16(e,31)._haltDisabledEvents(n)&&i),i},C.c,C.a)),r._2(29,671744,null,0,i.m,[i.l,i.a,m.h],{routerLink:[0,"routerLink"]},null),r._17(30,1),r._2(31,180224,null,0,b.a,[g.a,E.i,r.k],null,null),r._2(32,16384,null,0,b.c,[],null,null),(e()(),r._22(-1,0,["\n    "])),(e()(),r._3(34,0,null,0,2,"mat-icon",[["class","icon mat-icon"],["role","img"]],null,null,null,w.b,w.a)),r._2(35,638976,null,0,S.b,[r.k,S.d,[8,null]],null,null),(e()(),r._22(-1,0,["\n      account_circle\n    "])),(e()(),r._22(-1,0,["\n  "])),(e()(),r._22(-1,0,["\n"])),(e()(),r._22(-1,null,["\n"])),(e()(),r._3(40,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r._2(41,212992,[["outlet",4]],0,i.o,[i.b,r.M,r.j,[8,null],r.h],null,null)],function(e,t){var n=t.component;e(t,1,0,"primary"),e(t,5,0,n.url),e(t,8,0,"debates"),e(t,11,0,"debate"),e(t,14,0,"usuario"),e(t,17,0,"debate-en-curso"),e(t,20,0,"nuevo"),e(t,29,0,e(t,30,0,"./usuario")),e(t,35,0),e(t,41,0)},function(e,t){e(t,0,0,r._16(t,1)._toolbarRows.length,!r._16(t,1)._toolbarRows.length),e(t,28,0,r._16(t,29).target,r._16(t,29).href,r._16(t,31).disabled?-1:0,r._16(t,31).disabled||null,r._16(t,31).disabled.toString())})}var D=r.Z("app-secretario",o,function(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"app-secretario",[],null,null,null,F,P)),r._2(1,245760,null,0,o,[i.l],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),M=n("aayJ"),k=n("dYU3"),x=n("j5BN"),L=n("X949"),W=n("ki1d"),j=n("eoFs"),q=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},V=function(){return function(e){var t=this;this._debatesPendientes=new j.a([]),this._debatesFinalizados=new j.a([]),this._debatesEnCurso=new j.a([]),this.debatesPendientes=this._debatesPendientes.asObservable(),this.debatesFinalizados=this._debatesFinalizados.asObservable(),this.debatesEnCurso=this._debatesEnCurso.asObservable(),e.list("/punicipio/debates",function(e){return e.orderByChild("estado").equalTo("pendiente")}).snapshotChanges().map(function(e){return e.map(function(e){return q({key:e.payload.key},e.payload.val())})}).subscribe(function(e){t._debatesPendientes.next(e)}),e.list("/punicipio/debates",function(e){return e.orderByChild("estado").equalTo("finalizado")}).snapshotChanges().map(function(e){return e.map(function(e){return q({key:e.payload.key},e.payload.val())})}).subscribe(function(e){t._debatesFinalizados.next(e)}),e.list("/punicipio/debates",function(e){return e.orderByChild("estado").equalTo("en-curso")}).valueChanges().subscribe(function(e){t._debatesEnCurso.next(e)})}}(),J=r._1({encapsulation:0,styles:[[".mat-list-icon[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.pendientes[_ngcontent-%COMP%]   .mat-list-icon[_ngcontent-%COMP%]{color:rgba(16,38,165,.54)}.en-curso[_ngcontent-%COMP%]   .mat-list-icon[_ngcontent-%COMP%]{color:rgba(0,145,0,.54)}.finalizados[_ngcontent-%COMP%]   .mat-list-icon[_ngcontent-%COMP%]{color:rgba(107,26,44,.54)}.crear-nuevo[_ngcontent-%COMP%]{position:fixed;z-index:10;bottom:24px;right:24px;margin-right:12px;transition-property:background-color,box-shadow}"]],data:{}});function Q(e){return r._24(0,[(e()(),r._3(0,0,null,null,19,"a",[["class","pendientes mat-list-item"],["mat-list-item",""]],[[1,"target",0],[8,"href",4]],[[null,"click"],[null,"focus"],[null,"blur"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==r._16(e,1).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),"focus"===t&&(i=!1!==r._16(e,3)._handleFocus()&&i),"blur"===t&&(i=!1!==r._16(e,3)._handleBlur()&&i),i},M.d,M.b)),r._2(1,671744,null,0,i.m,[i.l,i.a,m.h],{routerLink:[0,"routerLink"]},null),r._17(2,1),r._2(3,1097728,null,2,k.c,[r.k,[2,k.g]],null,null),r._20(603979776,1,{_lines:1}),r._20(335544320,2,{_hasAvatar:0}),(e()(),r._22(-1,2,["\n    "])),(e()(),r._3(7,0,null,0,3,"mat-icon",[["class","mat-icon mat-list-icon"],["mat-list-icon",""],["role","img"]],null,null,null,w.b,w.a)),r._2(8,638976,null,0,S.b,[r.k,S.d,[8,null]],null,null),r._2(9,16384,null,0,k.b,[],null,null),(e()(),r._22(-1,0,["folder"])),(e()(),r._22(-1,2,["\n    "])),(e()(),r._3(12,0,null,1,2,"h4",[["class","mat-line"],["mat-line",""]],null,null,null,null,null)),r._2(13,16384,[[1,4]],0,x.m,[],null,null),(e()(),r._22(14,null,["",""])),(e()(),r._22(-1,2,["\n    "])),(e()(),r._3(16,0,null,1,2,"p",[["class","mat-line"],["mat-line",""]],null,null,null,null,null)),r._2(17,16384,[[1,4]],0,x.m,[],null,null),(e()(),r._22(18,null,["",""])),(e()(),r._22(-1,2,["\n  "]))],function(e,t){e(t,1,0,e(t,2,0,"./../debate/"+t.context.$implicit.key)),e(t,8,0)},function(e,t){e(t,0,0,r._16(t,1).target,r._16(t,1).href),e(t,14,0,t.context.$implicit.titulo),e(t,18,0,t.context.$implicit.estado)})}function U(e){return r._24(0,[(e()(),r._3(0,0,null,null,19,"a",[["class","finalizados mat-list-item"],["mat-list-item",""]],[[1,"target",0],[8,"href",4]],[[null,"click"],[null,"focus"],[null,"blur"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==r._16(e,1).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),"focus"===t&&(i=!1!==r._16(e,3)._handleFocus()&&i),"blur"===t&&(i=!1!==r._16(e,3)._handleBlur()&&i),i},M.d,M.b)),r._2(1,671744,null,0,i.m,[i.l,i.a,m.h],{routerLink:[0,"routerLink"]},null),r._17(2,1),r._2(3,1097728,null,2,k.c,[r.k,[2,k.g]],null,null),r._20(603979776,5,{_lines:1}),r._20(335544320,6,{_hasAvatar:0}),(e()(),r._22(-1,2,["\n    "])),(e()(),r._3(7,0,null,0,3,"mat-icon",[["class","mat-icon mat-list-icon"],["mat-list-icon",""],["role","img"]],null,null,null,w.b,w.a)),r._2(8,638976,null,0,S.b,[r.k,S.d,[8,null]],null,null),r._2(9,16384,null,0,k.b,[],null,null),(e()(),r._22(-1,0,["folder"])),(e()(),r._22(-1,2,["\n    "])),(e()(),r._3(12,0,null,1,2,"h4",[["class","mat-line"],["mat-line",""]],null,null,null,null,null)),r._2(13,16384,[[5,4]],0,x.m,[],null,null),(e()(),r._22(14,null,["",""])),(e()(),r._22(-1,2,["\n    "])),(e()(),r._3(16,0,null,1,2,"p",[["class","mat-line"],["mat-line",""]],null,null,null,null,null)),r._2(17,16384,[[5,4]],0,x.m,[],null,null),(e()(),r._22(18,null,["",""])),(e()(),r._22(-1,2,["\n  "]))],function(e,t){e(t,1,0,e(t,2,0,"./../debate/"+t.context.$implicit.key)),e(t,8,0)},function(e,t){e(t,0,0,r._16(t,1).target,r._16(t,1).href),e(t,14,0,t.context.$implicit.titulo),e(t,18,0,t.context.$implicit.estado)})}function B(e){return r._24(0,[(e()(),r._3(0,0,null,null,49,"mat-nav-list",[["class","mat-nav-list"],["role","navigation"]],null,null,null,M.f,M.c)),r._2(1,49152,null,0,k.g,[],null,null),(e()(),r._22(-1,0,["\n  "])),(e()(),r._3(3,0,null,0,2,"h3",[["class","mat-subheader"],["mat-subheader",""]],null,null,null,null,null)),r._2(4,16384,null,0,k.f,[],null,null),(e()(),r._22(-1,null,["Pendientes"])),(e()(),r._22(-1,0,["\n  "])),(e()(),r.Y(16777216,null,0,2,null,Q)),r._2(8,802816,null,0,m.j,[r.M,r.J,r.q],{ngForOf:[0,"ngForOf"]},null),r._18(131072,m.b,[r.h]),(e()(),r._22(-1,0,["\n  "])),(e()(),r._3(11,0,null,0,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-inset",null]],null,null,L.b,L.a)),r._2(12,49152,null,0,W.a,[],null,null),(e()(),r._22(-1,0,["\n  "])),(e()(),r._3(14,0,null,0,2,"h3",[["class","mat-subheader"],["mat-subheader",""]],null,null,null,null,null)),r._2(15,16384,null,0,k.f,[],null,null),(e()(),r._22(-1,null,["En Curso"])),(e()(),r._22(-1,0,["\n  "])),(e()(),r._3(18,0,null,0,19,"a",[["class","en-curso mat-list-item"],["mat-list-item",""]],[[1,"target",0],[8,"href",4]],[[null,"click"],[null,"focus"],[null,"blur"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==r._16(e,19).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),"focus"===t&&(i=!1!==r._16(e,21)._handleFocus()&&i),"blur"===t&&(i=!1!==r._16(e,21)._handleBlur()&&i),i},M.d,M.b)),r._2(19,671744,null,0,i.m,[i.l,i.a,m.h],{routerLink:[0,"routerLink"]},null),r._17(20,1),r._2(21,1097728,null,2,k.c,[r.k,[2,k.g]],null,null),r._20(603979776,3,{_lines:1}),r._20(335544320,4,{_hasAvatar:0}),(e()(),r._22(-1,2,["\n    "])),(e()(),r._3(25,0,null,0,3,"mat-icon",[["class","mat-icon mat-list-icon"],["mat-list-icon",""],["role","img"]],null,null,null,w.b,w.a)),r._2(26,638976,null,0,S.b,[r.k,S.d,[8,null]],null,null),r._2(27,16384,null,0,k.b,[],null,null),(e()(),r._22(-1,0,["folder_shared"])),(e()(),r._22(-1,2,["\n    "])),(e()(),r._3(30,0,null,1,2,"h4",[["class","mat-line"],["mat-line",""]],null,null,null,null,null)),r._2(31,16384,[[3,4]],0,x.m,[],null,null),(e()(),r._22(-1,null,["Ahora"])),(e()(),r._22(-1,2,["\n    "])),(e()(),r._3(34,0,null,1,2,"p",[["class","mat-line"],["mat-line",""]],null,null,null,null,null)),r._2(35,16384,[[3,4]],0,x.m,[],null,null),(e()(),r._22(-1,null,["huh?"])),(e()(),r._22(-1,2,["\n  "])),(e()(),r._22(-1,0,["\n  "])),(e()(),r._3(39,0,null,0,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-inset",null]],null,null,L.b,L.a)),r._2(40,49152,null,0,W.a,[],null,null),(e()(),r._22(-1,0,["\n  "])),(e()(),r._3(42,0,null,0,2,"h3",[["class","mat-subheader"],["mat-subheader",""]],null,null,null,null,null)),r._2(43,16384,null,0,k.f,[],null,null),(e()(),r._22(-1,null,["Finalizados"])),(e()(),r._22(-1,0,["\n  "])),(e()(),r.Y(16777216,null,0,2,null,U)),r._2(47,802816,null,0,m.j,[r.M,r.J,r.q],{ngForOf:[0,"ngForOf"]},null),r._18(131072,m.b,[r.h]),(e()(),r._22(-1,0,["\n"])),(e()(),r._22(-1,null,["\n"])),(e()(),r._3(51,0,null,null,9,"a",[["class","crear-nuevo mat-fab"],["color","warn"],["mat-fab",""]],[[1,"target",0],[8,"href",4],[1,"tabindex",0],[1,"disabled",0],[1,"aria-disabled",0]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==r._16(e,52).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),"click"===t&&(i=!1!==r._16(e,54)._haltDisabledEvents(n)&&i),i},C.c,C.a)),r._2(52,671744,null,0,i.m,[i.l,i.a,m.h],{routerLink:[0,"routerLink"]},null),r._17(53,1),r._2(54,180224,null,0,b.a,[g.a,E.i,r.k],{color:[0,"color"]},null),r._2(55,16384,null,0,b.e,[[8,null],[2,b.a]],null,null),(e()(),r._22(-1,0,["\n  "])),(e()(),r._3(57,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],null,null,null,w.b,w.a)),r._2(58,638976,null,0,S.b,[r.k,S.d,[8,null]],null,null),(e()(),r._22(-1,0,["add"])),(e()(),r._22(-1,0,["\n"]))],function(e,t){var n=t.component;e(t,8,0,r._23(t,8,0,r._16(t,9).transform(n.ds.debatesPendientes))),e(t,19,0,e(t,20,0,"./../debate-en-curso")),e(t,26,0),e(t,47,0,r._23(t,47,0,r._16(t,48).transform(n.ds.debatesFinalizados))),e(t,52,0,e(t,53,0,"./../nuevo")),e(t,54,0,"warn"),e(t,58,0)},function(e,t){e(t,11,0,r._16(t,12).vertical?"vertical":"horizontal",r._16(t,12).vertical,r._16(t,12).inset),e(t,18,0,r._16(t,19).target,r._16(t,19).href),e(t,39,0,r._16(t,40).vertical?"vertical":"horizontal",r._16(t,40).vertical,r._16(t,40).inset),e(t,51,0,r._16(t,52).target,r._16(t,52).href,r._16(t,54).disabled?-1:0,r._16(t,54).disabled||null,r._16(t,54).disabled.toString())})}var H=r.Z("app-debates",l,function(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"app-debates",[],null,null,null,B,J)),r._2(1,114688,null,0,l,[V],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),G=n("0nO6"),K=n("ulOE"),Y=n("Lpd/"),z=n("SlD5"),X=n("BtE/"),Z=n("w24y"),$=n("OFGE"),ee=n("l6RC"),te=(n("Dvgu"),n("13je"));function ne(e){return void 0===e||null===e}function re(e){return"function"==typeof e.set}function ie(e,t){return re(t)?t:e.database().ref(t)}function oe(e,t){if("string"==typeof e)return t.stringCase();if(re(e))return t.firebaseCase();if("function"==typeof e.exportVal)return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof e)}var le=n("AP4T"),ae=n("ozyc"),se=n("dmC+");le.a.prototype.map=se.a;var ue=n("XecN"),ce=n("6Xbx"),he=n("MZnR"),de=n("E9/g"),pe=n("PAZ8"),_e=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new fe(e,this.delay,this.scheduler))},e}(),fe=function(e){Object(ce.b)(t,e);function t(t,n,r){e.call(this,t),this.delay=n,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}return t.dispatch=function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(e,o)}else t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,n=new ye(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(pe.a.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e)},t.prototype._complete=function(){this.scheduleNotification(pe.a.createComplete())},t}(de.a),ye=function(e,t){this.time=e,this.notification=t};le.a.prototype.delay=function(e,t){return void 0===t&&(t=ue.a),function(e,t){void 0===t&&(t=ue.a);var n=Object(he.a)(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new _e(n,t))}}(e,t)(this)};var ve=n("URbD");le.a.prototype.share=ve.a;function ge(e,t,n){void 0===n&&(n="on");var r=new le.a(function(r){var i=e[n](t,function(e,t){r.next({snapshot:e,prevKey:t}),"once"==n&&r.complete()},r.error.bind(r));return"on"==n?{unsubscribe:function(){e.off(t,i)}}:{unsubscribe:function(){}}}).map(function(e){var n=e.snapshot,r=e.prevKey,i=null;return n.exists()&&(i=n.key),{type:t,payload:n,prevKey:r,key:i}}).delay(0);return ae.a.call(r,new te.e(Zone.current)).share()}var me=n("nAqi");le.a.prototype.scan=function(e,t){return arguments.length>=2?Object(me.a)(e,t)(this):Object(me.a)(e)(this)};var Ce=n("2kLc");le.a.merge=Ce.a,n("HECM"),n("RSzd"),n("Wi6i");var be=n("8ofh"),Ee=n("NePw"),we=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new Se(e,this.compare,this.keySelector))},e}(),Se=function(e){Object(ce.b)(t,e);function t(t,n,r){e.call(this,t),this.keySelector=r,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}return t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=e;if(this.keySelector&&(t=Object(be.a)(this.keySelector)(e))===Ee.a)return this.destination.error(Ee.a.e);var n=!1;if(this.hasKey){if((n=Object(be.a)(this.compare)(this.key,t))===Ee.a)return this.destination.error(Ee.a.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=t,this.destination.next(e))},t}(de.a);le.a.prototype.distinctUntilChanged=function(e,t){return(n=e,r=t,function(e){return e.lift(new we(n,r))})(this);var n,r};function Pe(e,t){for(var n=e.length,r=0;r<n;r++)if(e[r].payload.key===t)return r;return-1}function Ne(e,t){var n=t.payload,r=t.prevKey,i=t.key,o=Pe(e,i),l=function(e,t){if(ne(t))return 0;var n=Pe(e,t);return-1===n?e.length:n+1}(e,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){var a=null;t.payload.forEach(function(t){var n={payload:t,type:"value",prevKey:a,key:t.key};return a=t.key,e=e.concat([n]),!1})}return e;case"child_added":if(o>-1){var s=e[o-1];(s&&s.key||null)!=r&&(e=e.filter(function(e){return e.payload.key!==n.key})).splice(l,0,t)}else{if(null==r)return[t].concat(e);(e=e.slice()).splice(l,0,t)}return e;case"child_removed":return e.filter(function(e){return e.payload.key!==n.key});case"child_changed":return e.map(function(e){return e.payload.key===i?t:e});case"child_moved":if(o>-1){var u=e.splice(o,1)[0];return(e=e.slice()).splice(l,0,u),e}return e;default:return e}}function Te(e){return(ne(e)||0===e.length)&&(e=["child_added","child_removed","child_changed","child_moved"]),e}function Oe(e,t){return t=Te(t),r=t,ge(n=e,"value","once").switchMap(function(e){var t=[le.a.of(e)];return r.forEach(function(e){return t.push(ge(n,e))}),le.a.merge.apply(le.a,t).scan(Ne,[])}).distinctUntilChanged();var n,r}function Ie(e,t){var n=(t=Te(t)).map(function(t){return ge(e,t)});return le.a.merge.apply(le.a,n)}var Re=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new Ae(e,this.predicate))},e}(),Ae=function(e){Object(ce.b)(t,e);function t(t,n){e.call(this,t),this.predicate=n,this.skipping=!0,this.index=0}return t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}},t}(de.a);le.a.prototype.skipWhile=function(e){return(t=e,function(e){return e.lift(new Re(t))})(this);var t};var Fe=n("lI6h"),De=n("qgI0"),Me=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new ke(e,this.observables,this.project))},e}(),ke=function(e){Object(ce.b)(t,e);function t(t,n,r){e.call(this,t),this.observables=n,this.project=r,this.toRespond=[];var i=n.length;this.values=new Array(i);for(var o=0;o<i;o++)this.toRespond.push(o);for(o=0;o<i;o++){var l=n[o];this.add(Object(De.a)(this,l,l,o))}}return t.prototype.notifyNext=function(e,t,n,r,i){this.values[n]=t;var o=this.toRespond;if(o.length>0){var l=o.indexOf(n);-1!==l&&o.splice(l,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Fe.a);le.a.prototype.withLatestFrom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return(function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new Me(e,n))}}).apply(void 0,e)(this)};function xe(e,t){return function(n,r){return oe(n,{stringCase:function(){return e.child(n)[t](r)},firebaseCase:function(){return n[t](r)},snapshotCase:function(){return n.ref[t](r)}})}}function Le(e){return function(){return ge(e,"value")}}var We=function(){function e(e){this.app=e,this.database=e.database()}return e.prototype.list=function(e,t){var n=ie(this.app,e),r=n;return t&&(r=t(n)),function(e){return{query:e,update:xe(e.ref,"update"),set:xe(e.ref,"set"),push:function(t){return e.ref.push(t)},remove:(r=e.ref,function(e){return e?oe(e,{stringCase:function(){return r.child(e).remove()},firebaseCase:function(){return e.remove()},snapshotCase:function(){return e.ref.remove()}}):r.remove()}),snapshotChanges:function(t){return Oe(e,t)},stateChanges:(n=e,function(e){return Ie(n,e)}),auditTrail:(t=e,function(e){return function(e,t){return(r=n,ge(r,"value").map(function(e){var t;return e.payload.forEach(function(e){return t=e.key,!1}),{data:e,lastKeyToLoad:t}})).withLatestFrom(t).map(function(e){var t=e[1];return{actions:t,lastKeyToLoad:e[0].lastKeyToLoad,loadedKeys:t.map(function(e){return e.key})}}).skipWhile(function(e){return-1===e.loadedKeys.indexOf(e.lastKeyToLoad)}).map(function(e){return e.actions});var r}(0,Ie(n=t,e).scan(function(e,t){return e.concat([t])},[]));var n}),valueChanges:function(t){return Oe(e,t).map(function(e){return e.map(function(e){return e.payload.val()})})}};var t,n,r}(r)},e.prototype.object=function(e){var t=ie(this.app,e);return{query:n=t,snapshotChanges:Le(n),update:function(e){return n.ref.update(e)},set:function(e){return n.ref.set(e)},remove:function(){return n.ref.remove()},valueChanges:function(){return Le(n)().map(function(e){return e.payload.exists()?e.payload.val():null})}};var n},e.prototype.createPushId=function(){return this.database.ref().push().key},e}();function je(e){return new We(e)}var qe=function(){},Ve=r._1({encapsulation:0,styles:[[".mat-typography[_ngcontent-%COMP%]{padding:10px 15px;width:100%;box-sizing:border-box}.mat-form-field[_ngcontent-%COMP%]{display:block}button[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}"]],data:{}});function Je(e){return r._24(0,[(e()(),r._3(0,0,null,null,80,"form",[["class","mat-typography"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var i=!0,o=e.component;return"submit"===t&&(i=!1!==r._16(e,2).onSubmit(n)&&i),"reset"===t&&(i=!1!==r._16(e,2).onReset()&&i),"ngSubmit"===t&&(i=!1!==o.onSubmit(o.debateForm.value)&&i),i},null,null)),r._2(1,16384,null,0,G.p,[],null,null),r._2(2,540672,null,0,G.f,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r._19(2048,null,G.b,null,[G.f]),r._2(4,16384,null,0,G.k,[G.b],null,null),(e()(),r._22(-1,null,["\n  "])),(e()(),r._3(6,0,null,null,18,"mat-form-field",[["class","mat-input-container mat-form-field"]],[[2,"mat-input-invalid",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-focused",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,K.b,K.a)),r._2(7,7389184,null,7,Y.a,[r.k,r.h,[2,x.h]],null,null),r._20(335544320,1,{_control:0}),r._20(335544320,2,{_placeholderChild:0}),r._20(335544320,3,{_labelChild:0}),r._20(603979776,4,{_errorChildren:1}),r._20(603979776,5,{_hintChildren:1}),r._20(603979776,6,{_prefixChildren:1}),r._20(603979776,7,{_suffixChildren:1}),(e()(),r._22(-1,1,["\n    "])),(e()(),r._3(16,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","Titulo del Debate"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[8,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(e,t,n){var i=!0;return"input"===t&&(i=!1!==r._16(e,17)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==r._16(e,17).onTouched()&&i),"compositionstart"===t&&(i=!1!==r._16(e,17)._compositionStart()&&i),"compositionend"===t&&(i=!1!==r._16(e,17)._compositionEnd(n.target.value)&&i),"blur"===t&&(i=!1!==r._16(e,22)._focusChanged(!1)&&i),"focus"===t&&(i=!1!==r._16(e,22)._focusChanged(!0)&&i),"input"===t&&(i=!1!==r._16(e,22)._onInput()&&i),i},null,null)),r._2(17,16384,null,0,G.c,[r.B,r.k,[2,G.a]],null,null),r._19(1024,null,G.h,function(e){return[e]},[G.c]),r._2(19,540672,null,0,G.e,[[8,null],[8,null],[2,G.h]],{form:[0,"form"]},null),r._19(2048,null,G.i,null,[G.e]),r._2(21,16384,null,0,G.j,[G.i],null,null),r._2(22,933888,null,0,z.b,[r.k,g.a,[2,G.i],[2,G.l],[2,G.f],x.d,[8,null]],{placeholder:[0,"placeholder"]},null),r._19(2048,[[1,4]],Y.b,null,[z.b]),(e()(),r._22(-1,1,["\n  "])),(e()(),r._22(-1,null,["\n\n  "])),(e()(),r._3(26,0,null,null,18,"mat-form-field",[["class","mat-input-container mat-form-field"]],[[2,"mat-input-invalid",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-focused",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,K.b,K.a)),r._2(27,7389184,null,7,Y.a,[r.k,r.h,[2,x.h]],null,null),r._20(335544320,8,{_control:0}),r._20(335544320,9,{_placeholderChild:0}),r._20(335544320,10,{_labelChild:0}),r._20(603979776,11,{_errorChildren:1}),r._20(603979776,12,{_hintChildren:1}),r._20(603979776,13,{_prefixChildren:1}),r._20(603979776,14,{_suffixChildren:1}),(e()(),r._22(-1,1,["\n    "])),(e()(),r._3(36,0,null,1,7,"textarea",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","Agenda"],["rows","5"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[8,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(e,t,n){var i=!0;return"input"===t&&(i=!1!==r._16(e,37)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==r._16(e,37).onTouched()&&i),"compositionstart"===t&&(i=!1!==r._16(e,37)._compositionStart()&&i),"compositionend"===t&&(i=!1!==r._16(e,37)._compositionEnd(n.target.value)&&i),"blur"===t&&(i=!1!==r._16(e,42)._focusChanged(!1)&&i),"focus"===t&&(i=!1!==r._16(e,42)._focusChanged(!0)&&i),"input"===t&&(i=!1!==r._16(e,42)._onInput()&&i),i},null,null)),r._2(37,16384,null,0,G.c,[r.B,r.k,[2,G.a]],null,null),r._19(1024,null,G.h,function(e){return[e]},[G.c]),r._2(39,540672,null,0,G.e,[[8,null],[8,null],[2,G.h]],{form:[0,"form"]},null),r._19(2048,null,G.i,null,[G.e]),r._2(41,16384,null,0,G.j,[G.i],null,null),r._2(42,933888,null,0,z.b,[r.k,g.a,[2,G.i],[2,G.l],[2,G.f],x.d,[8,null]],{placeholder:[0,"placeholder"]},null),r._19(2048,[[8,4]],Y.b,null,[z.b]),(e()(),r._22(-1,1,["\n  "])),(e()(),r._22(-1,null,["\n\n  "])),(e()(),r._3(46,0,null,null,28,"mat-form-field",[["class","mat-input-container mat-form-field"]],[[2,"mat-input-invalid",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-focused",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,K.b,K.a)),r._2(47,7389184,null,7,Y.a,[r.k,r.h,[2,x.h]],null,null),r._20(335544320,15,{_control:0}),r._20(335544320,16,{_placeholderChild:0}),r._20(335544320,17,{_labelChild:0}),r._20(603979776,18,{_errorChildren:1}),r._20(603979776,19,{_hintChildren:1}),r._20(603979776,20,{_prefixChildren:1}),r._20(603979776,21,{_suffixChildren:1}),(e()(),r._22(-1,1,["\n    "])),(e()(),r._3(56,0,null,4,2,"mat-datepicker-toggle",[["class","mat-datepicker-toggle"],["matSuffix",""]],null,null,null,f.d,f.c)),r._2(57,16384,[[21,4]],0,Y.d,[],null,null),r._2(58,1753088,null,0,X.j,[X.h,r.h],{datepicker:[0,"datepicker"]},null),(e()(),r._22(-1,1,["\n    "])),(e()(),r._3(60,16777216,null,1,1,"mat-datepicker",[["disabled","false"],["touchUi","true"]],null,null,null,f.e,f.b)),r._2(61,180224,[["picker",4]],0,X.e,[Z.c,$.a,r.x,r.M,X.a,[2,x.c],[2,ee.c],[2,m.d]],{touchUi:[0,"touchUi"],disabled:[1,"disabled"]},null),(e()(),r._22(-1,1,["\n    "])),(e()(),r._3(63,0,null,1,10,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","Fecha del debate (mm/dd/yyyy)"]],[[1,"aria-haspopup",0],[1,"aria-owns",0],[1,"min",0],[1,"max",0],[8,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[8,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"focus"]],function(e,t,n){var i=!0;return"input"===t&&(i=!1!==r._16(e,64)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==r._16(e,64).onTouched()&&i),"compositionstart"===t&&(i=!1!==r._16(e,64)._compositionStart()&&i),"compositionend"===t&&(i=!1!==r._16(e,64)._compositionEnd(n.target.value)&&i),"input"===t&&(i=!1!==r._16(e,65)._onInput(n.target.value)&&i),"change"===t&&(i=!1!==r._16(e,65)._onChange()&&i),"blur"===t&&(i=!1!==r._16(e,65)._onTouched()&&i),"keydown"===t&&(i=!1!==r._16(e,65)._onKeydown(n)&&i),"blur"===t&&(i=!1!==r._16(e,72)._focusChanged(!1)&&i),"focus"===t&&(i=!1!==r._16(e,72)._focusChanged(!0)&&i),"input"===t&&(i=!1!==r._16(e,72)._onInput()&&i),i},null,null)),r._2(64,16384,null,0,G.c,[r.B,r.k,[2,G.a]],null,null),r._2(65,1196032,null,0,X.g,[r.k,[2,x.c],[2,x.f],[2,Y.a]],{matDatepicker:[0,"matDatepicker"]},null),r._19(1024,null,G.g,function(e){return[e]},[X.g]),r._19(1024,null,G.h,function(e,t){return[e,t]},[G.c,X.g]),r._2(68,540672,null,0,G.e,[[2,G.g],[8,null],[2,G.h]],{form:[0,"form"]},null),r._19(2048,null,G.i,null,[G.e]),r._2(70,16384,null,0,G.j,[G.i],null,null),r._19(2048,null,z.a,null,[X.g]),r._2(72,933888,null,0,z.b,[r.k,g.a,[2,G.i],[2,G.l],[2,G.f],x.d,[2,z.a]],{placeholder:[0,"placeholder"]},null),r._19(2048,[[15,4]],Y.b,null,[z.b]),(e()(),r._22(-1,1,["\n  "])),(e()(),r._22(-1,null,["\n\n  "])),(e()(),r._3(76,0,null,null,3,"button",[["class","mat-raised-button"],["color","primary"],["mat-raised-button",""],["type","submit"]],[[8,"disabled",0]],null,null,C.d,C.b)),r._2(77,180224,null,0,b.b,[r.k,g.a,E.i],{color:[0,"color"]},null),r._2(78,16384,null,0,b.h,[],null,null),(e()(),r._22(-1,0,["\n    Crear\n  "])),(e()(),r._22(-1,null,["\n\n"]))],function(e,t){var n=t.component;e(t,2,0,n.debateForm),e(t,19,0,n.debateForm.controls.titulo),e(t,22,0,"Titulo del Debate"),e(t,39,0,n.debateForm.controls.agenda),e(t,42,0,"Agenda"),e(t,58,0,r._16(t,61)),e(t,61,0,"true","false"),e(t,65,0,r._16(t,61)),e(t,68,0,n.debateForm.controls.fecha),e(t,72,0,"Fecha del debate (mm/dd/yyyy)"),e(t,77,0,"primary")},function(e,t){e(t,0,0,r._16(t,4).ngClassUntouched,r._16(t,4).ngClassTouched,r._16(t,4).ngClassPristine,r._16(t,4).ngClassDirty,r._16(t,4).ngClassValid,r._16(t,4).ngClassInvalid,r._16(t,4).ngClassPending),e(t,6,1,[r._16(t,7)._control.errorState,r._16(t,7)._control.errorState,r._16(t,7)._canLabelFloat,r._16(t,7)._shouldLabelFloat(),r._16(t,7)._hideControlPlaceholder(),r._16(t,7)._control.disabled,r._16(t,7)._control.focused,"primary"==r._16(t,7).color,"accent"==r._16(t,7).color,"warn"==r._16(t,7).color,r._16(t,7)._shouldForward("untouched"),r._16(t,7)._shouldForward("touched"),r._16(t,7)._shouldForward("pristine"),r._16(t,7)._shouldForward("dirty"),r._16(t,7)._shouldForward("valid"),r._16(t,7)._shouldForward("invalid"),r._16(t,7)._shouldForward("pending")]),e(t,16,1,[r._16(t,21).ngClassUntouched,r._16(t,21).ngClassTouched,r._16(t,21).ngClassPristine,r._16(t,21).ngClassDirty,r._16(t,21).ngClassValid,r._16(t,21).ngClassInvalid,r._16(t,21).ngClassPending,r._16(t,22)._isServer,r._16(t,22).id,r._16(t,22).placeholder,r._16(t,22).disabled,r._16(t,22).required,r._16(t,22).readonly,r._16(t,22)._ariaDescribedby||null,r._16(t,22).errorState,r._16(t,22).required.toString()]),e(t,26,1,[r._16(t,27)._control.errorState,r._16(t,27)._control.errorState,r._16(t,27)._canLabelFloat,r._16(t,27)._shouldLabelFloat(),r._16(t,27)._hideControlPlaceholder(),r._16(t,27)._control.disabled,r._16(t,27)._control.focused,"primary"==r._16(t,27).color,"accent"==r._16(t,27).color,"warn"==r._16(t,27).color,r._16(t,27)._shouldForward("untouched"),r._16(t,27)._shouldForward("touched"),r._16(t,27)._shouldForward("pristine"),r._16(t,27)._shouldForward("dirty"),r._16(t,27)._shouldForward("valid"),r._16(t,27)._shouldForward("invalid"),r._16(t,27)._shouldForward("pending")]),e(t,36,1,[r._16(t,41).ngClassUntouched,r._16(t,41).ngClassTouched,r._16(t,41).ngClassPristine,r._16(t,41).ngClassDirty,r._16(t,41).ngClassValid,r._16(t,41).ngClassInvalid,r._16(t,41).ngClassPending,r._16(t,42)._isServer,r._16(t,42).id,r._16(t,42).placeholder,r._16(t,42).disabled,r._16(t,42).required,r._16(t,42).readonly,r._16(t,42)._ariaDescribedby||null,r._16(t,42).errorState,r._16(t,42).required.toString()]),e(t,46,1,[r._16(t,47)._control.errorState,r._16(t,47)._control.errorState,r._16(t,47)._canLabelFloat,r._16(t,47)._shouldLabelFloat(),r._16(t,47)._hideControlPlaceholder(),r._16(t,47)._control.disabled,r._16(t,47)._control.focused,"primary"==r._16(t,47).color,"accent"==r._16(t,47).color,"warn"==r._16(t,47).color,r._16(t,47)._shouldForward("untouched"),r._16(t,47)._shouldForward("touched"),r._16(t,47)._shouldForward("pristine"),r._16(t,47)._shouldForward("dirty"),r._16(t,47)._shouldForward("valid"),r._16(t,47)._shouldForward("invalid"),r._16(t,47)._shouldForward("pending")]),e(t,63,1,[!0,(null==r._16(t,65)._datepicker?null:r._16(t,65)._datepicker.opened)&&r._16(t,65)._datepicker.id||null,r._16(t,65).min?r._16(t,65)._dateAdapter.toIso8601(r._16(t,65).min):null,r._16(t,65).max?r._16(t,65)._dateAdapter.toIso8601(r._16(t,65).max):null,r._16(t,65).disabled,r._16(t,70).ngClassUntouched,r._16(t,70).ngClassTouched,r._16(t,70).ngClassPristine,r._16(t,70).ngClassDirty,r._16(t,70).ngClassValid,r._16(t,70).ngClassInvalid,r._16(t,70).ngClassPending,r._16(t,72)._isServer,r._16(t,72).id,r._16(t,72).placeholder,r._16(t,72).disabled,r._16(t,72).required,r._16(t,72).readonly,r._16(t,72)._ariaDescribedby||null,r._16(t,72).errorState,r._16(t,72).required.toString()]),e(t,76,0,r._16(t,77).disabled||null)})}var Qe=r.Z("app-nuevo-debate",u,function(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"app-nuevo-debate",[],null,null,null,Je,Ve)),r._2(1,114688,null,0,u,[We,i.l,i.a,G.d],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),Ue=r._1({encapsulation:0,styles:[[""]],data:{}});function Be(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r._22(-1,null,["\n  debate-en-curso works!\n"])),(e()(),r._22(-1,null,["\n"]))],null,null)}var He=r.Z("app-debate-en-curso",h,function(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"app-debate-en-curso",[],null,null,null,Be,Ue)),r._2(1,114688,null,0,h,[],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),Ge=r._1({encapsulation:0,styles:[[".mat-elevation-z8[_ngcontent-%COMP%]{padding:30px}"]],data:{}});function Ke(e){return r._24(0,[(e()(),r._3(0,0,null,null,26,"section",[["class","mat-typography"]],null,null,null,null,null)),(e()(),r._22(-1,null,["\n  "])),(e()(),r._3(2,0,null,null,23,"div",[["class","mat-elevation-z8"]],null,null,null,null,null)),(e()(),r._22(-1,null,["\n    "])),(e()(),r._3(4,0,null,null,1,"h1",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Mi cuenta"])),(e()(),r._22(-1,null,["\n    "])),(e()(),r._3(7,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-inset",null]],null,null,L.b,L.a)),r._2(8,49152,null,0,W.a,[],null,null),(e()(),r._22(-1,null,["\n    "])),(e()(),r._3(10,0,null,null,2,"h3",[["class","mat-subheader"],["mat-subheader",""]],null,null,null,null,null)),r._2(11,16384,null,0,k.f,[],null,null),(e()(),r._22(-1,null,["Usuario: Socks"])),(e()(),r._22(-1,null,["\n    "])),(e()(),r._3(14,0,null,null,2,"h3",[["class","mat-subheader"],["mat-subheader",""]],null,null,null,null,null)),r._2(15,16384,null,0,k.f,[],null,null),(e()(),r._22(-1,null,["Password: Socks"])),(e()(),r._22(-1,null,["\n    "])),(e()(),r._3(18,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-inset",null]],null,null,L.b,L.a)),r._2(19,49152,null,0,W.a,[],null,null),(e()(),r._22(-1,null,["\n    "])),(e()(),r._3(21,0,null,null,3,"button",[["class","mat-raised-button"],["color","primary"],["mat-raised-button",""]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.logOut()&&r),r},C.d,C.b)),r._2(22,180224,null,0,b.b,[r.k,g.a,E.i],{color:[0,"color"]},null),r._2(23,16384,null,0,b.h,[],null,null),(e()(),r._22(-1,0,["\n      Salir\n    "])),(e()(),r._22(-1,null,["\n  "])),(e()(),r._22(-1,null,["\n"]))],function(e,t){e(t,22,0,"primary")},function(e,t){e(t,7,0,r._16(t,8).vertical?"vertical":"horizontal",r._16(t,8).vertical,r._16(t,8).inset),e(t,18,0,r._16(t,19).vertical?"vertical":"horizontal",r._16(t,19).vertical,r._16(t,19).inset),e(t,21,0,r._16(t,22).disabled||null)})}var Ye=r.Z("app-usuario",s,function(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"app-usuario",[],null,null,null,Ke,Ge)),r._2(1,114688,null,0,s,[i.l],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),ze=r._1({encapsulation:0,styles:[[".mat-typography[_ngcontent-%COMP%]{padding:10px 15px;width:100%;box-sizing:border-box}h1[_ngcontent-%COMP%]{color:rgba(0,0,0,.9);color:#3f51b5;font-weight:700;letter-spacing:5px}.item[_ngcontent-%COMP%]{margin-bottom:15px}.clave[_ngcontent-%COMP%]{font-weight:400;color:#3f51b5}.clave[_ngcontent-%COMP%], .valor[_ngcontent-%COMP%]{margin:0;padding:0}.valor[_ngcontent-%COMP%]{display:block;box-sizing:border-box;color:rgba(0,0,0,.9)}ul[_ngcontent-%COMP%]{list-style-position:inside}li[_ngcontent-%COMP%]{padding:3px 15px}li[_ngcontent-%COMP%]:first-letter{text-transform:capitalize}.crear-nuevo[_ngcontent-%COMP%]{position:fixed;z-index:10;bottom:24px;right:24px;margin-right:12px;transition-property:background-color,box-shadow}"]],data:{}});function Xe(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r._22(-1,null,["\n        Pendiente\n      "]))],null,null)}function Ze(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r._22(-1,null,["\n        Finalizado\n      "]))],null,null)}function $e(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r._22(-1,null,["\n        En Curso\n      "]))],null,null)}function et(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r._22(-1,null,["\n        Ups, algo salio mal\n      "]))],null,null)}function tt(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Enero"]))],null,null)}function nt(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Febrero"]))],null,null)}function rt(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Marzo"]))],null,null)}function it(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Abril"]))],null,null)}function ot(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Mayo"]))],null,null)}function lt(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Junio"]))],null,null)}function at(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Julio"]))],null,null)}function st(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Agosto"]))],null,null)}function ut(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Septiembre"]))],null,null)}function ct(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Octubre"]))],null,null)}function ht(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Noviembre"]))],null,null)}function dt(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["Diciembre"]))],null,null)}function pt(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._22(-1,null,["-----"]))],null,null)}function _t(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"li",[["role","listitem"]],null,null,null,null,null)),(e()(),r._22(1,null,["\n        ","\n      "]))],null,function(e,t){e(t,1,0,t.context.$implicit)})}function ft(e){return r._24(0,[(e()(),r._3(0,0,null,null,9,"a",[["class","crear-nuevo mat-fab"],["color","accent"],["mat-fab",""]],[[1,"target",0],[8,"href",4],[1,"tabindex",0],[1,"disabled",0],[1,"aria-disabled",0]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==r._16(e,1).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),"click"===t&&(i=!1!==r._16(e,3)._haltDisabledEvents(n)&&i),i},C.c,C.a)),r._2(1,671744,null,0,i.m,[i.l,i.a,m.h],{routerLink:[0,"routerLink"]},null),r._17(2,1),r._2(3,180224,null,0,b.a,[g.a,E.i,r.k],{color:[0,"color"]},null),r._2(4,16384,null,0,b.e,[[8,null],[2,b.a]],null,null),(e()(),r._22(-1,0,["\n  "])),(e()(),r._3(6,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],null,null,null,w.b,w.a)),r._2(7,638976,null,0,S.b,[r.k,S.d,[8,null]],null,null),(e()(),r._22(-1,0,["edit"])),(e()(),r._22(-1,0,["\n"]))],function(e,t){e(t,1,0,e(t,2,0,"./edit")),e(t,3,0,"accent"),e(t,7,0)},function(e,t){e(t,0,0,r._16(t,1).target,r._16(t,1).href,r._16(t,3).disabled?-1:0,r._16(t,3).disabled||null,r._16(t,3).disabled.toString())})}function yt(e){return r._24(0,[(e()(),r._3(0,0,null,null,96,"div",[["class","mat-typography"]],null,null,null,null,null)),(e()(),r._22(-1,null,["\n  "])),(e()(),r._3(2,0,null,null,7,"div",[["class","item"]],null,null,null,null,null)),(e()(),r._22(-1,null,["\n    "])),(e()(),r._3(4,0,null,null,1,"h2",[["class","clave"]],null,null,null,null,null)),(e()(),r._22(-1,null,["\n      Titulo\n    "])),(e()(),r._22(-1,null,["\n    "])),(e()(),r._3(7,0,null,null,1,"div",[["class","valor"]],null,null,null,null,null)),(e()(),r._22(8,null,["\n      ","\n    "])),(e()(),r._22(-1,null,["\n  "])),(e()(),r._22(-1,null,["\n\n  "])),(e()(),r._3(11,0,null,null,20,"div",[["class","item"]],null,null,null,null,null)),(e()(),r._22(-1,null,["\n    "])),(e()(),r._3(13,0,null,null,1,"h2",[["class","clave"]],null,null,null,null,null)),(e()(),r._22(-1,null,["\n      Estado\n    "])),(e()(),r._22(-1,null,["\n    "])),(e()(),r._3(16,0,null,null,14,"div",[["class","valor"]],null,null,null,null,null)),r._2(17,16384,null,0,m.n,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),r._22(-1,null,["\n      "])),(e()(),r.Y(16777216,null,null,1,null,Xe)),r._2(20,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n      "])),(e()(),r.Y(16777216,null,null,1,null,Ze)),r._2(23,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n      "])),(e()(),r.Y(16777216,null,null,1,null,$e)),r._2(26,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n      "])),(e()(),r.Y(16777216,null,null,1,null,et)),r._2(29,16384,null,0,m.p,[r.M,r.J,m.n],null,null),(e()(),r._22(-1,null,["\n    "])),(e()(),r._22(-1,null,["\n  "])),(e()(),r._22(-1,null,["\n\n  "])),(e()(),r._3(33,0,null,null,50,"div",[["class","item"]],null,null,null,null,null)),(e()(),r._22(-1,null,["\n    "])),(e()(),r._3(35,0,null,null,1,"h2",[["class","clave"]],null,null,null,null,null)),(e()(),r._22(-1,null,["\n      Fecha\n    "])),(e()(),r._22(-1,null,["\n    "])),(e()(),r._3(38,0,null,null,44,"div",[["class","valor"]],null,null,null,null,null)),(e()(),r._22(39,null,["\n      "," de\n      "])),(e()(),r._3(40,0,null,null,41,"span",[],null,null,null,null,null)),r._2(41,16384,null,0,m.n,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),r._22(-1,null,["\n        "])),(e()(),r.Y(16777216,null,null,1,null,tt)),r._2(44,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n        "])),(e()(),r.Y(16777216,null,null,1,null,nt)),r._2(47,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n        "])),(e()(),r.Y(16777216,null,null,1,null,rt)),r._2(50,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n        "])),(e()(),r.Y(16777216,null,null,1,null,it)),r._2(53,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n        "])),(e()(),r.Y(16777216,null,null,1,null,ot)),r._2(56,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n        "])),(e()(),r.Y(16777216,null,null,1,null,lt)),r._2(59,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n        "])),(e()(),r.Y(16777216,null,null,1,null,at)),r._2(62,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n        "])),(e()(),r.Y(16777216,null,null,1,null,st)),r._2(65,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n        "])),(e()(),r.Y(16777216,null,null,1,null,ut)),r._2(68,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n        "])),(e()(),r.Y(16777216,null,null,1,null,ct)),r._2(71,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n        "])),(e()(),r.Y(16777216,null,null,1,null,ht)),r._2(74,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n        "])),(e()(),r.Y(16777216,null,null,1,null,dt)),r._2(77,278528,null,0,m.o,[r.M,r.J,m.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r._22(-1,null,["\n        "])),(e()(),r.Y(16777216,null,null,1,null,pt)),r._2(80,16384,null,0,m.p,[r.M,r.J,m.n],null,null),(e()(),r._22(-1,null,["\n      "])),(e()(),r._22(82,null,["\n      , ","\n    "])),(e()(),r._22(-1,null,["\n  "])),(e()(),r._22(-1,null,["\n\n  "])),(e()(),r._3(85,0,null,null,10,"div",[["class","item"]],null,null,null,null,null)),(e()(),r._22(-1,null,["\n    "])),(e()(),r._3(87,0,null,null,1,"h2",[["class","clave"]],null,null,null,null,null)),(e()(),r._22(-1,null,["\n      Agenda\n    "])),(e()(),r._22(-1,null,["\n    "])),(e()(),r._3(90,0,null,null,4,"ul",[["class","valor"]],null,null,null,null,null)),(e()(),r._22(-1,null,["\n      "])),(e()(),r.Y(16777216,null,null,1,null,_t)),r._2(93,802816,null,0,m.j,[r.M,r.J,r.q],{ngForOf:[0,"ngForOf"]},null),(e()(),r._22(-1,null,["\n    "])),(e()(),r._22(-1,null,["\n  "])),(e()(),r._22(-1,null,["\n\n"])),(e()(),r._22(-1,null,["\n\n"])),(e()(),r.Y(16777216,null,null,1,null,ft)),r._2(99,16384,null,0,m.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,17,0,n.debate.estado),e(t,20,0,"pendiente"),e(t,23,0,"finalizado"),e(t,26,0,"en-curso"),e(t,41,0,n.debate.fecha.getMonth()),e(t,44,0,0),e(t,47,0,1),e(t,50,0,2),e(t,53,0,3),e(t,56,0,4),e(t,59,0,5),e(t,62,0,6),e(t,65,0,7),e(t,68,0,8),e(t,71,0,9),e(t,74,0,10),e(t,77,0,11),e(t,93,0,n.debate.agenda),e(t,99,0,"pendiente"==n.debate.estado)},function(e,t){var n=t.component;e(t,8,0,n.debate.titulo),e(t,39,0,n.debate.fecha.getDate()),e(t,82,0,n.debate.fecha.getFullYear())})}var vt=r.Z("app-debate",a,function(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"app-debate",[],null,null,null,yt,ze)),r._2(1,245760,null,0,a,[i.a,We],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),gt=r._1({encapsulation:0,styles:[[".mat-typography[_ngcontent-%COMP%]{padding:10px 15px;width:100%;box-sizing:border-box}.mat-form-field[_ngcontent-%COMP%]{display:block}button[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}"]],data:{}});function mt(e){return r._24(0,[(e()(),r._3(0,0,null,null,80,"form",[["class","mat-typography"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var i=!0,o=e.component;return"submit"===t&&(i=!1!==r._16(e,2).onSubmit(n)&&i),"reset"===t&&(i=!1!==r._16(e,2).onReset()&&i),"ngSubmit"===t&&(i=!1!==o.onSubmit(o.debateForm.value)&&i),i},null,null)),r._2(1,16384,null,0,G.p,[],null,null),r._2(2,540672,null,0,G.f,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r._19(2048,null,G.b,null,[G.f]),r._2(4,16384,null,0,G.k,[G.b],null,null),(e()(),r._22(-1,null,["\n  "])),(e()(),r._3(6,0,null,null,18,"mat-form-field",[["class","mat-input-container mat-form-field"]],[[2,"mat-input-invalid",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-focused",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,K.b,K.a)),r._2(7,7389184,null,7,Y.a,[r.k,r.h,[2,x.h]],null,null),r._20(335544320,1,{_control:0}),r._20(335544320,2,{_placeholderChild:0}),r._20(335544320,3,{_labelChild:0}),r._20(603979776,4,{_errorChildren:1}),r._20(603979776,5,{_hintChildren:1}),r._20(603979776,6,{_prefixChildren:1}),r._20(603979776,7,{_suffixChildren:1}),(e()(),r._22(-1,1,["\n    "])),(e()(),r._3(16,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","Titulo del Debate"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[8,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(e,t,n){var i=!0;return"input"===t&&(i=!1!==r._16(e,17)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==r._16(e,17).onTouched()&&i),"compositionstart"===t&&(i=!1!==r._16(e,17)._compositionStart()&&i),"compositionend"===t&&(i=!1!==r._16(e,17)._compositionEnd(n.target.value)&&i),"blur"===t&&(i=!1!==r._16(e,22)._focusChanged(!1)&&i),"focus"===t&&(i=!1!==r._16(e,22)._focusChanged(!0)&&i),"input"===t&&(i=!1!==r._16(e,22)._onInput()&&i),i},null,null)),r._2(17,16384,null,0,G.c,[r.B,r.k,[2,G.a]],null,null),r._19(1024,null,G.h,function(e){return[e]},[G.c]),r._2(19,540672,null,0,G.e,[[8,null],[8,null],[2,G.h]],{form:[0,"form"]},null),r._19(2048,null,G.i,null,[G.e]),r._2(21,16384,null,0,G.j,[G.i],null,null),r._2(22,933888,null,0,z.b,[r.k,g.a,[2,G.i],[2,G.l],[2,G.f],x.d,[8,null]],{placeholder:[0,"placeholder"]},null),r._19(2048,[[1,4]],Y.b,null,[z.b]),(e()(),r._22(-1,1,["\n  "])),(e()(),r._22(-1,null,["\n\n  "])),(e()(),r._3(26,0,null,null,18,"mat-form-field",[["class","mat-input-container mat-form-field"]],[[2,"mat-input-invalid",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-focused",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,K.b,K.a)),r._2(27,7389184,null,7,Y.a,[r.k,r.h,[2,x.h]],null,null),r._20(335544320,8,{_control:0}),r._20(335544320,9,{_placeholderChild:0}),r._20(335544320,10,{_labelChild:0}),r._20(603979776,11,{_errorChildren:1}),r._20(603979776,12,{_hintChildren:1}),r._20(603979776,13,{_prefixChildren:1}),r._20(603979776,14,{_suffixChildren:1}),(e()(),r._22(-1,1,["\n    "])),(e()(),r._3(36,0,null,1,7,"textarea",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","Agenda"],["rows","5"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[8,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(e,t,n){var i=!0;return"input"===t&&(i=!1!==r._16(e,37)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==r._16(e,37).onTouched()&&i),"compositionstart"===t&&(i=!1!==r._16(e,37)._compositionStart()&&i),"compositionend"===t&&(i=!1!==r._16(e,37)._compositionEnd(n.target.value)&&i),"blur"===t&&(i=!1!==r._16(e,42)._focusChanged(!1)&&i),"focus"===t&&(i=!1!==r._16(e,42)._focusChanged(!0)&&i),"input"===t&&(i=!1!==r._16(e,42)._onInput()&&i),i},null,null)),r._2(37,16384,null,0,G.c,[r.B,r.k,[2,G.a]],null,null),r._19(1024,null,G.h,function(e){return[e]},[G.c]),r._2(39,540672,null,0,G.e,[[8,null],[8,null],[2,G.h]],{form:[0,"form"]},null),r._19(2048,null,G.i,null,[G.e]),r._2(41,16384,null,0,G.j,[G.i],null,null),r._2(42,933888,null,0,z.b,[r.k,g.a,[2,G.i],[2,G.l],[2,G.f],x.d,[8,null]],{placeholder:[0,"placeholder"]},null),r._19(2048,[[8,4]],Y.b,null,[z.b]),(e()(),r._22(-1,1,["\n  "])),(e()(),r._22(-1,null,["\n\n  "])),(e()(),r._3(46,0,null,null,28,"mat-form-field",[["class","mat-input-container mat-form-field"]],[[2,"mat-input-invalid",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-focused",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,K.b,K.a)),r._2(47,7389184,null,7,Y.a,[r.k,r.h,[2,x.h]],null,null),r._20(335544320,15,{_control:0}),r._20(335544320,16,{_placeholderChild:0}),r._20(335544320,17,{_labelChild:0}),r._20(603979776,18,{_errorChildren:1}),r._20(603979776,19,{_hintChildren:1}),r._20(603979776,20,{_prefixChildren:1}),r._20(603979776,21,{_suffixChildren:1}),(e()(),r._22(-1,1,["\n    "])),(e()(),r._3(56,0,null,4,2,"mat-datepicker-toggle",[["class","mat-datepicker-toggle"],["matSuffix",""]],null,null,null,f.d,f.c)),r._2(57,16384,[[21,4]],0,Y.d,[],null,null),r._2(58,1753088,null,0,X.j,[X.h,r.h],{datepicker:[0,"datepicker"]},null),(e()(),r._22(-1,1,["\n    "])),(e()(),r._3(60,16777216,null,1,1,"mat-datepicker",[["touchUi","true"]],null,null,null,f.e,f.b)),r._2(61,180224,[["picker",4]],0,X.e,[Z.c,$.a,r.x,r.M,X.a,[2,x.c],[2,ee.c],[2,m.d]],{touchUi:[0,"touchUi"],disabled:[1,"disabled"]},null),(e()(),r._22(-1,1,["\n    "])),(e()(),r._3(63,0,null,1,10,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","Fecha del debate (mm/dd/yyyy)"]],[[1,"aria-haspopup",0],[1,"aria-owns",0],[1,"min",0],[1,"max",0],[8,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[8,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"focus"]],function(e,t,n){var i=!0;return"input"===t&&(i=!1!==r._16(e,64)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==r._16(e,64).onTouched()&&i),"compositionstart"===t&&(i=!1!==r._16(e,64)._compositionStart()&&i),"compositionend"===t&&(i=!1!==r._16(e,64)._compositionEnd(n.target.value)&&i),"input"===t&&(i=!1!==r._16(e,65)._onInput(n.target.value)&&i),"change"===t&&(i=!1!==r._16(e,65)._onChange()&&i),"blur"===t&&(i=!1!==r._16(e,65)._onTouched()&&i),"keydown"===t&&(i=!1!==r._16(e,65)._onKeydown(n)&&i),"blur"===t&&(i=!1!==r._16(e,72)._focusChanged(!1)&&i),"focus"===t&&(i=!1!==r._16(e,72)._focusChanged(!0)&&i),"input"===t&&(i=!1!==r._16(e,72)._onInput()&&i),i},null,null)),r._2(64,16384,null,0,G.c,[r.B,r.k,[2,G.a]],null,null),r._2(65,1196032,null,0,X.g,[r.k,[2,x.c],[2,x.f],[2,Y.a]],{matDatepicker:[0,"matDatepicker"]},null),r._19(1024,null,G.g,function(e){return[e]},[X.g]),r._19(1024,null,G.h,function(e,t){return[e,t]},[G.c,X.g]),r._2(68,540672,null,0,G.e,[[2,G.g],[8,null],[2,G.h]],{form:[0,"form"]},null),r._19(2048,null,G.i,null,[G.e]),r._2(70,16384,null,0,G.j,[G.i],null,null),r._19(2048,null,z.a,null,[X.g]),r._2(72,933888,null,0,z.b,[r.k,g.a,[2,G.i],[2,G.l],[2,G.f],x.d,[2,z.a]],{placeholder:[0,"placeholder"]},null),r._19(2048,[[15,4]],Y.b,null,[z.b]),(e()(),r._22(-1,1,["\n  "])),(e()(),r._22(-1,null,["\n\n  "])),(e()(),r._3(76,0,null,null,3,"button",[["class","mat-raised-button"],["color","primary"],["mat-raised-button",""],["type","submit"]],[[8,"disabled",0]],null,null,C.d,C.b)),r._2(77,180224,null,0,b.b,[r.k,g.a,E.i],{disabled:[0,"disabled"],color:[1,"color"]},null),r._2(78,16384,null,0,b.h,[],null,null),(e()(),r._22(-1,0,["\n    Editar\n  "])),(e()(),r._22(-1,null,["\n\n"]))],function(e,t){var n=t.component;e(t,2,0,n.debateForm),e(t,19,0,n.debateForm.controls.titulo),e(t,22,0,"Titulo del Debate"),e(t,39,0,n.debateForm.controls.agenda),e(t,42,0,"Agenda"),e(t,58,0,r._16(t,61)),e(t,61,0,"true",n.debateForm.disabled),e(t,65,0,r._16(t,61)),e(t,68,0,n.debateForm.controls.fecha),e(t,72,0,"Fecha del debate (mm/dd/yyyy)"),e(t,77,0,n.debateForm.disabled,"primary")},function(e,t){e(t,0,0,r._16(t,4).ngClassUntouched,r._16(t,4).ngClassTouched,r._16(t,4).ngClassPristine,r._16(t,4).ngClassDirty,r._16(t,4).ngClassValid,r._16(t,4).ngClassInvalid,r._16(t,4).ngClassPending),e(t,6,1,[r._16(t,7)._control.errorState,r._16(t,7)._control.errorState,r._16(t,7)._canLabelFloat,r._16(t,7)._shouldLabelFloat(),r._16(t,7)._hideControlPlaceholder(),r._16(t,7)._control.disabled,r._16(t,7)._control.focused,"primary"==r._16(t,7).color,"accent"==r._16(t,7).color,"warn"==r._16(t,7).color,r._16(t,7)._shouldForward("untouched"),r._16(t,7)._shouldForward("touched"),r._16(t,7)._shouldForward("pristine"),r._16(t,7)._shouldForward("dirty"),r._16(t,7)._shouldForward("valid"),r._16(t,7)._shouldForward("invalid"),r._16(t,7)._shouldForward("pending")]),e(t,16,1,[r._16(t,21).ngClassUntouched,r._16(t,21).ngClassTouched,r._16(t,21).ngClassPristine,r._16(t,21).ngClassDirty,r._16(t,21).ngClassValid,r._16(t,21).ngClassInvalid,r._16(t,21).ngClassPending,r._16(t,22)._isServer,r._16(t,22).id,r._16(t,22).placeholder,r._16(t,22).disabled,r._16(t,22).required,r._16(t,22).readonly,r._16(t,22)._ariaDescribedby||null,r._16(t,22).errorState,r._16(t,22).required.toString()]),e(t,26,1,[r._16(t,27)._control.errorState,r._16(t,27)._control.errorState,r._16(t,27)._canLabelFloat,r._16(t,27)._shouldLabelFloat(),r._16(t,27)._hideControlPlaceholder(),r._16(t,27)._control.disabled,r._16(t,27)._control.focused,"primary"==r._16(t,27).color,"accent"==r._16(t,27).color,"warn"==r._16(t,27).color,r._16(t,27)._shouldForward("untouched"),r._16(t,27)._shouldForward("touched"),r._16(t,27)._shouldForward("pristine"),r._16(t,27)._shouldForward("dirty"),r._16(t,27)._shouldForward("valid"),r._16(t,27)._shouldForward("invalid"),r._16(t,27)._shouldForward("pending")]),e(t,36,1,[r._16(t,41).ngClassUntouched,r._16(t,41).ngClassTouched,r._16(t,41).ngClassPristine,r._16(t,41).ngClassDirty,r._16(t,41).ngClassValid,r._16(t,41).ngClassInvalid,r._16(t,41).ngClassPending,r._16(t,42)._isServer,r._16(t,42).id,r._16(t,42).placeholder,r._16(t,42).disabled,r._16(t,42).required,r._16(t,42).readonly,r._16(t,42)._ariaDescribedby||null,r._16(t,42).errorState,r._16(t,42).required.toString()]),e(t,46,1,[r._16(t,47)._control.errorState,r._16(t,47)._control.errorState,r._16(t,47)._canLabelFloat,r._16(t,47)._shouldLabelFloat(),r._16(t,47)._hideControlPlaceholder(),r._16(t,47)._control.disabled,r._16(t,47)._control.focused,"primary"==r._16(t,47).color,"accent"==r._16(t,47).color,"warn"==r._16(t,47).color,r._16(t,47)._shouldForward("untouched"),r._16(t,47)._shouldForward("touched"),r._16(t,47)._shouldForward("pristine"),r._16(t,47)._shouldForward("dirty"),r._16(t,47)._shouldForward("valid"),r._16(t,47)._shouldForward("invalid"),r._16(t,47)._shouldForward("pending")]),e(t,63,1,[!0,(null==r._16(t,65)._datepicker?null:r._16(t,65)._datepicker.opened)&&r._16(t,65)._datepicker.id||null,r._16(t,65).min?r._16(t,65)._dateAdapter.toIso8601(r._16(t,65).min):null,r._16(t,65).max?r._16(t,65)._dateAdapter.toIso8601(r._16(t,65).max):null,r._16(t,65).disabled,r._16(t,70).ngClassUntouched,r._16(t,70).ngClassTouched,r._16(t,70).ngClassPristine,r._16(t,70).ngClassDirty,r._16(t,70).ngClassValid,r._16(t,70).ngClassInvalid,r._16(t,70).ngClassPending,r._16(t,72)._isServer,r._16(t,72).id,r._16(t,72).placeholder,r._16(t,72).disabled,r._16(t,72).required,r._16(t,72).readonly,r._16(t,72)._ariaDescribedby||null,r._16(t,72).errorState,r._16(t,72).required.toString()]),e(t,76,0,r._16(t,77).disabled||null)})}var Ct=r.Z("app-debate-edit",c,function(e){return r._24(0,[(e()(),r._3(0,0,null,null,1,"app-debate-edit",[],null,null,null,mt,gt)),r._2(1,245760,null,0,c,[We,G.d,i.a,i.l],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),bt=n("4jwp"),Et=n("R1vt"),wt=n("9iV4"),St=n("RyBE"),Pt=n("3Czw"),Nt=n("LT5m"),Tt=n("ka8K"),Ot=n("gOiy"),It=n("CZgk"),Rt=n("e0rv"),At=n("FhOc"),Ft=n("RXNa");n.d(t,"SecretarioModuleNgFactory",function(){return Dt});var Dt=r._0(d,[],function(e){return r._13([r._14(512,r.j,r.W,[[8,[p.a,p.b,_.a,f.a,D,H,Qe,He,Ye,vt,Ct]],[3,r.j],r.v]),r._14(4608,m.m,m.l,[r.s,[2,m.u]]),r._14(5120,te.b,te.f,[te.c,te.d]),r._14(5120,We,je,[te.b]),r._14(4608,G.d,G.d,[]),r._14(4608,G.q,G.q,[]),r._14(6144,ee.b,null,[m.d]),r._14(4608,ee.c,ee.c,[[2,ee.b]]),r._14(4608,g.a,g.a,[]),r._14(5120,bt.c,bt.a,[[3,bt.c],r.x,g.a]),r._14(5120,bt.f,bt.e,[[3,bt.f],g.a,r.x]),r._14(4608,$.f,$.f,[bt.c,bt.f,r.x]),r._14(5120,$.c,$.g,[[3,$.c],m.d]),r._14(4608,$.k,$.k,[bt.f,m.d]),r._14(5120,$.d,$.j,[[3,$.d],m.d]),r._14(4608,$.a,$.a,[$.f,$.c,r.j,$.k,$.d,r.g,r.p,r.x,m.d]),r._14(5120,$.h,$.i,[$.a]),r._14(5120,Et.b,Et.d,[$.a]),r._14(5120,S.d,S.a,[[3,S.d],[2,wt.a],St.c]),r._14(4608,E.k,E.k,[g.a]),r._14(4608,E.j,E.j,[E.k,r.x,m.d]),r._14(136192,E.d,E.b,[[3,E.d],m.d]),r._14(5120,E.n,E.m,[[3,E.n],[2,E.l],m.d]),r._14(5120,E.i,E.g,[[3,E.i],r.x,g.a]),r._14(4608,Pt.d,Pt.d,[g.a]),r._14(135680,Pt.a,Pt.a,[Pt.d,r.x]),r._14(4608,Nt.b,Nt.b,[$.a,E.n,r.p,Pt.a,[3,Nt.b]]),r._14(5120,Z.a,Z.b,[$.a]),r._14(4608,Z.c,Z.c,[$.a,r.p,[2,m.g],Z.a,[3,Z.c]]),r._14(5120,Tt.b,Tt.c,[[3,Tt.b]]),r._14(5120,Ot.a,Ot.b,[$.a]),r._14(4608,x.d,x.d,[]),r._14(4608,X.h,X.h,[]),r._14(5120,X.a,X.b,[$.a]),r._14(6144,x.g,null,[r.s]),r._14(4608,x.c,x.x,[[2,x.g]]),r._14(4608,V,V,[We]),r._14(512,m.c,m.c,[]),r._14(512,i.n,i.n,[[2,i.s],[2,i.l]]),r._14(512,te.a,te.a,[]),r._14(512,qe,qe,[]),r._14(512,G.o,G.o,[]),r._14(512,G.m,G.m,[]),r._14(512,ee.a,ee.a,[]),r._14(512,It.f,It.f,[]),r._14(512,g.b,g.b,[]),r._14(512,bt.b,bt.b,[]),r._14(512,$.e,$.e,[]),r._14(256,x.e,!0,[]),r._14(512,x.l,x.l,[[2,x.e]]),r._14(512,x.w,x.w,[]),r._14(512,Et.c,Et.c,[]),r._14(512,S.c,S.c,[]),r._14(512,v.b,v.b,[]),r._14(512,E.a,E.a,[]),r._14(512,Rt.b,Rt.b,[]),r._14(512,x.n,x.n,[]),r._14(512,x.u,x.u,[]),r._14(512,W.b,W.b,[]),r._14(512,k.d,k.d,[]),r._14(512,b.d,b.d,[]),r._14(512,Pt.c,Pt.c,[]),r._14(512,Nt.d,Nt.d,[]),r._14(512,Z.e,Z.e,[]),r._14(512,At.c,At.c,[]),r._14(512,Ft.a,Ft.a,[]),r._14(512,Y.c,Y.c,[]),r._14(512,x.s,x.s,[]),r._14(512,Ot.c,Ot.c,[]),r._14(512,z.c,z.c,[]),r._14(512,X.i,X.i,[]),r._14(512,x.y,x.y,[]),r._14(512,x.p,x.p,[]),r._14(512,d,d,[]),r._14(256,Et.a,{overlapTrigger:!0,xPosition:"after",yPosition:"below"},[]),r._14(256,Rt.a,!1,[]),r._14(256,x.f,x.i,[]),r._14(1024,i.j,function(){return[[{path:"app",component:o,children:[{path:"debates",component:l},{path:"nuevo",component:u},{path:"debate-en-curso",component:h},{path:"usuario",component:s},{path:"debate/:id",component:a},{path:"debate/:id/edit",component:c}]},{path:"**",redirectTo:"app/debates"}]]},[])])})},stu6:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i,o=n("GboV"),l=n("p+VM"),a=n("F1yO"),s=n("JEJ4"),u=function(e){r(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}return Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return i},set:function(e){i=e},enumerable:!0,configurable:!0}),t.prototype.compare=function(e,t){return a.nameCompare(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw s.assertionError("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return l.NamedNode.MIN},t.prototype.maxPost=function(){return new l.NamedNode(a.MAX_NAME,i)},t.prototype.makePost=function(e,t){return s.assert("string"==typeof e,"KeyIndex indexValue must always be a string."),new l.NamedNode(e,i)},t.prototype.toString=function(){return".key"},t}(o.Index);t.KeyIndex=u,t.KEY_INDEX=new u},tYwN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("XtH8"),i=n("8UuO");t.Database=i.Database;var o=n("rB9K");t.Query=o.Query;var l=n("5pXs");t.Reference=l.Reference;var a=n("F1yO");t.enableLogging=a.enableLogging;var s=n("+VeI"),u=n("xvZM"),c=n("7qHF"),h=n("JEJ4"),d=i.Database.ServerValue;t.ServerValue=d;function p(t){var n=t.INTERNAL.registerService("database",function(e,t,n){return s.RepoManager.getInstance().databaseFromApp(e,n)},{Reference:l.Reference,Query:o.Query,Database:i.Database,enableLogging:a.enableLogging,INTERNAL:u,ServerValue:d,TEST_ACCESS:c},null,!0);h.isNodeSdk()&&(e.exports=n)}t.registerDatabase=p,p(r.default);var _=n("GnQ5");t.DataSnapshot=_.DataSnapshot;var f=n("oyal");t.OnDisconnect=f.OnDisconnect},uCc5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("y8hQ"),o=n("R3TC"),l=n("JEJ4"),a=n("JEJ4"),s=n("bN85"),u=n("0npo");t.SyncPoint=function(){function e(){this.views_={}}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return l.assert(r,"Reference.ts has not been loaded"),r},set:function(e){l.assert(!r,"__referenceConstructor has already been defined"),r=e},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return a.isEmpty(this.views_)},e.prototype.applyOperation=function(e,t,n){var r=e.source.queryId;if(null!==r){var i=a.safeGet(this.views_,r);return l.assert(null!=i,"SyncTree gave us an op for an invalid query."),i.applyOperation(e,t,n)}var o=[];return a.forEach(this.views_,function(r,i){o=o.concat(i.applyOperation(e,t,n))}),o},e.prototype.addEventRegistration=function(e,t,n,r,l){var c=e.queryIdentifier(),h=a.safeGet(this.views_,c);if(!h){var d=n.calcCompleteEventCache(l?r:null),p=!1;d?p=!0:r instanceof o.ChildrenNode?(d=n.calcCompleteEventChildren(r),p=!1):(d=o.ChildrenNode.EMPTY_NODE,p=!1);var _=new s.ViewCache(new i.CacheNode(d,p,!1),new i.CacheNode(r,l,!1));h=new u.View(e,_),this.views_[c]=h}return h.addEventRegistration(t),h.getInitialEvents(t)},e.prototype.removeEventRegistration=function(t,n,r){var i=t.queryIdentifier(),o=[],l=[],s=this.hasCompleteView();if("default"===i){var u=this;a.forEach(this.views_,function(e,t){l=l.concat(t.removeEventRegistration(n,r)),t.isEmpty()&&(delete u.views_[e],t.getQuery().getQueryParams().loadsAllData()||o.push(t.getQuery()))})}else{var c=a.safeGet(this.views_,i);c&&(l=l.concat(c.removeEventRegistration(n,r)),c.isEmpty()&&(delete this.views_[i],c.getQuery().getQueryParams().loadsAllData()||o.push(c.getQuery())))}return s&&!this.hasCompleteView()&&o.push(new e.__referenceConstructor(t.repo,t.path)),{removed:o,events:l}},e.prototype.getQueryViews=function(){var e=this;return Object.keys(this.views_).map(function(t){return e.views_[t]}).filter(function(e){return!e.getQuery().getQueryParams().loadsAllData()})},e.prototype.getCompleteServerCache=function(e){var t=null;return a.forEach(this.views_,function(n,r){t=t||r.getCompleteServerCache(e)}),t},e.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return a.safeGet(this.views_,t)},e.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},e.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},e.prototype.getCompleteView=function(){return a.findValue(this.views_,function(e){return e.getQuery().getQueryParams().loadsAllData()})||null},e}()},xfHL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("fvGz"),i=n("JEJ4"),o=n("F1yO"),l=n("JEJ4"),a=n("JEJ4");t.INVALID_KEY_REGEX_=/[\[\].#$\/\u0000-\u001F\u007F]/,t.INVALID_PATH_REGEX_=/[\[\].#$\u0000-\u001F\u007F]/,t.MAX_LEAF_SIZE_=10485760,t.isValidKey=function(e){return"string"==typeof e&&0!==e.length&&!t.INVALID_KEY_REGEX_.test(e)},t.isValidPathString=function(e){return"string"==typeof e&&0!==e.length&&!t.INVALID_PATH_REGEX_.test(e)},t.isValidRootPathString=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),t.isValidPathString(e)},t.isValidPriority=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!o.isInvalidJSONNumber(e)||e&&"object"==typeof e&&i.contains(e,".sv")},t.validateFirebaseDataArg=function(e,n,r,i,o){o&&void 0===r||t.validateFirebaseData(l.errorPrefix(e,n,o),r,i)},t.validateFirebaseData=function(e,n,l){var s=l instanceof r.Path?new r.ValidationPath(l,e):l;if(void 0===n)throw new Error(e+"contains undefined "+s.toErrorString());if("function"==typeof n)throw new Error(e+"contains a function "+s.toErrorString()+" with contents = "+n.toString());if(o.isInvalidJSONNumber(n))throw new Error(e+"contains "+n.toString()+" "+s.toErrorString());if("string"==typeof n&&n.length>t.MAX_LEAF_SIZE_/3&&a.stringLength(n)>t.MAX_LEAF_SIZE_)throw new Error(e+"contains a string greater than "+t.MAX_LEAF_SIZE_+" utf8 bytes "+s.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var u=!1,c=!1;if(i.forEach(n,function(n,r){if(".value"===n)u=!0;else if(".priority"!==n&&".sv"!==n&&(c=!0,!t.isValidKey(n)))throw new Error(e+" contains an invalid key ("+n+") "+s.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');s.push(n),t.validateFirebaseData(e,r,s),s.pop()}),u&&c)throw new Error(e+' contains ".value" child '+s.toErrorString()+" in addition to actual children.")}},t.validateFirebaseMergePaths=function(e,n){var i,o;for(i=0;i<n.length;i++)for(var l=(o=n[i]).slice(),a=0;a<l.length;a++)if(".priority"===l[a]&&a===l.length-1);else if(!t.isValidKey(l[a]))throw new Error(e+"contains an invalid key ("+l[a]+") in path "+o.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');n.sort(r.Path.comparePaths);var s=null;for(i=0;i<n.length;i++){if(o=n[i],null!==s&&s.contains(o))throw new Error(e+"contains a path "+s.toString()+" that is ancestor of another path "+o.toString());s=o}},t.validateFirebaseMergeDataArg=function(e,n,o,a,s){if(!s||void 0!==o){var u=l.errorPrefix(e,n,s);if(!o||"object"!=typeof o||Array.isArray(o))throw new Error(u+" must be an object containing the children to replace.");var c=[];i.forEach(o,function(e,n){var i=new r.Path(e);if(t.validateFirebaseData(u,n,a.child(i)),".priority"===i.getBack()&&!t.isValidPriority(n))throw new Error(u+"contains an invalid value for '"+i.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(i)}),t.validateFirebaseMergePaths(u,c)}},t.validatePriority=function(e,n,r,i){if(!i||void 0!==r){if(o.isInvalidJSONNumber(r))throw new Error(l.errorPrefix(e,n,i)+"is "+r.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!t.isValidPriority(r))throw new Error(l.errorPrefix(e,n,i)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},t.validateEventType=function(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(l.errorPrefix(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.validateKey=function(e,n,r,i){if(!(i&&void 0===r||t.isValidKey(r)))throw new Error(l.errorPrefix(e,n,i)+'was an invalid key = "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},t.validatePathString=function(e,n,r,i){if(!(i&&void 0===r||t.isValidPathString(r)))throw new Error(l.errorPrefix(e,n,i)+'was an invalid path = "'+r+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},t.validateRootPathString=function(e,n,r,i){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),t.validatePathString(e,n,r,i)},t.validateWritablePath=function(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")},t.validateUrl=function(e,n,r){var i=r.path.toString();if("string"!=typeof r.repoInfo.host||0===r.repoInfo.host.length||!t.isValidKey(r.repoInfo.namespace)||0!==i.length&&!t.isValidRootPathString(i))throw new Error(l.errorPrefix(e,n,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},t.validateCredential=function(e,t,n,r){if((!r||void 0!==n)&&"string"!=typeof n)throw new Error(l.errorPrefix(e,t,r)+"must be a valid credential (a string).")},t.validateBoolean=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(l.errorPrefix(e,t,r)+"must be a boolean.")},t.validateString=function(e,t,n,r){if((!r||void 0!==n)&&"string"!=typeof n)throw new Error(l.errorPrefix(e,t,r)+"must be a valid string.")},t.validateObject=function(e,t,n,r){if(!(r&&void 0===n||n&&"object"==typeof n&&null!==n))throw new Error(l.errorPrefix(e,t,r)+"must be a valid object.")},t.validateObjectContainsKey=function(e,t,n,r,o,a){if(!n||"object"!=typeof n||!i.contains(n,r)){if(o)return;throw new Error(l.errorPrefix(e,t,o)+'must contain the key "'+r+'"')}if(a){var s=i.safeGet(n,r);if("number"===a&&"number"!=typeof s||"string"===a&&"string"!=typeof s||"boolean"===a&&"boolean"!=typeof s||"function"===a&&"function"!=typeof s||"object"===a&&"object"!=typeof s&&s)throw o?new Error(l.errorPrefix(e,t,o)+'contains invalid value for key "'+r+'" (must be of type "'+a+'")'):new Error(l.errorPrefix(e,t,o)+'must contain the key "'+r+'" with type "'+a+'"')}}},xhf5:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n("XtH8"),o=n("JEJ4"),l=n("JEJ4"),a=n("JEJ4"),s=n("F1yO"),u=n("fvGz"),c=n("CIVu"),h=n("0hmO"),d=n("JEJ4"),p=n("j0qB"),_=n("JEJ4"),f=n("JEJ4"),y=n("zzcx"),v=1e3,g=3e5;t.PersistentConnection=function(e){r(t,e);function t(n,r,i,o,l,a){var u=e.call(this)||this;if(u.repoInfo_=n,u.onDataUpdate_=r,u.onConnectStatus_=i,u.onServerInfoUpdate_=o,u.authTokenProvider_=l,u.authOverride_=a,u.id=t.nextPersistentConnectionId_++,u.log_=s.logWrapper("p:"+u.id+":"),u.interruptReasons_={},u.listens_={},u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=v,u.maxReconnectDelay_=g,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,a&&!f.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),c.VisibilityMonitor.getInstance().on("visible",u.onVisible_,u),-1===n.host.indexOf("fblocal")&&h.OnlineMonitor.getInstance().on("online",u.onOnline_,u),u}return t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(l.stringify(i)),a.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),o=e.path.toString();this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},a.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),a.assert(!this.listens_[o][i],"listen() called twice for same path/queryId.");var l={onComplete:r,hashFn:t,query:e,tag:n};this.listens_[o][i]=l,this.connected_&&this.sendListen_(l)},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var l={p:i};e.tag&&(l.q=r.queryObject(),l.t=e.tag),l.h=e.hashFn(),this.sendRequest("q",l,function(l){var a=l.d,s=l.s;t.warnOnListenWarnings_(a,r),(n.listens_[i]&&n.listens_[i][o])===e&&(n.log_("listen response",l),"ok"!==s&&n.removeListen_(i,o),e.onComplete&&e.onComplete(s,a))})},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&o.contains(e,"w")){var n=o.safeGet(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',i=t.path.toString();s.warn("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||d.isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=d.isValidFormat(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))})}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),a.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)})},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,function(e){"ok"!==e.s&&t.log_("reportStats","Error sending stats: "+e.d)})}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+l.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):s.error("Unrecognized action received from server: "+l.stringify(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;a.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=v,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=v,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=v),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,o=this,l=this.lastSessionId,u=!1,c=null,h=function(){c?c.close():(u=!0,r())};this.realtime_={close:h,sendRequest:function(e){a.assert(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)}};var d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then(function(t){u?s.log("getToken() completed but was canceled"):(s.log("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,c=new p.Connection(i,o.repoInfo_,e,n,r,function(e){s.warn(e+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},l))}).then(null,function(e){o.log_("Failed to get token: "+e),u||(_.CONSTANTS.NODE_ADMIN&&s.warn(e),h())})}},t.prototype.interrupt=function(e){s.log("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){s.log("Resuming connection for reason: "+e),delete this.interruptReasons_[e],o.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=v,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map(function(e){return s.ObjectToUniqueKey(e)}).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new u.Path(e).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][t],delete this.listens_[r][t],0===o.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},t.prototype.onAuthRevoked_=function(e,t){s.log("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&"undefined"!=typeof console&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e=this;this.tryAuth(),o.forEach(this.listens_,function(t,n){o.forEach(n,function(t,n){e.sendListen_(n)})});for(var t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},t.prototype.sendConnectStats_=function(){var e={},t="js";_.CONSTANTS.NODE_ADMIN?t="admin_node":_.CONSTANTS.NODE_CLIENT&&(t="node"),e["sdk."+t+"."+i.default.SDK_VERSION.replace(/\./g,"-")]=1,f.isMobileCordova()?e["framework.cordova"]=1:f.isReactNative()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=h.OnlineMonitor.getInstance().currentlyOnline();return o.isEmpty(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(y.ServerActions)},xvZM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("9ard"),i=n("qYrH");t.forceLongPolling=function(){r.WebSocketConnection.forceDisallow(),i.BrowserPollConnection.forceAllow()},t.forceWebSockets=function(){i.BrowserPollConnection.forceDisallow()},t.isWebSocketsAvailable=function(){return r.WebSocketConnection.isAvailable()},t.setSecurityDebugCallback=function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},t.stats=function(e,t){e.repo.stats(t)},t.statsIncrementCounter=function(e,t){e.repo.statsIncrementCounter(t)},t.dataUpdateCount=function(e){return e.repo.dataUpdateCount},t.interceptServerData=function(e,t){return e.repo.interceptServerData_(t)}},y8hQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CacheNode=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}()},"z8+r":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("fvGz"),i=n("/fob"),o=n("r9Yg");t.SparseSnapshotTree=function(){function e(){this.value_=null,this.children_=null}return e.prototype.find=function(e){if(null!=this.value_)return this.value_.getChild(e);if(e.isEmpty()||null==this.children_)return null;var t=e.getFront();return e=e.popFront(),this.children_.contains(t)?this.children_.get(t).find(e):null},e.prototype.remember=function(t,n){if(t.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(t,n);else{null==this.children_&&(this.children_=new o.CountedSet);var r=t.getFront();this.children_.contains(r)||this.children_.add(r,new e);var i=this.children_.get(r);t=t.popFront(),i.remember(t,n)}},e.prototype.forget=function(e){if(e.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var t=this.value_;this.value_=null;var n=this;return t.forEachChild(i.PRIORITY_INDEX,function(e,t){n.remember(new r.Path(e),t)}),this.forget(e)}if(null!==this.children_){var o=e.getFront();return e=e.popFront(),this.children_.contains(o)&&this.children_.get(o).forget(e)&&this.children_.remove(o),!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},e.prototype.forEachTree=function(e,t){null!==this.value_?t(e,this.value_):this.forEachChild(function(n,i){var o=new r.Path(e.toString()+"/"+n);i.forEachTree(o,t)})},e.prototype.forEachChild=function(e){null!==this.children_&&this.children_.each(function(t,n){e(t,n)})},e}()},zFzr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("F1yO");t.NAME_ONLY_COMPARATOR=function(e,t){return r.nameCompare(e.name,t.name)},t.NAME_COMPARATOR=function(e,t){return r.nameCompare(e,t)}},"zPe/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JEJ4"),i=n("F1yO"),o=n("opdF"),l=1e4,a=3e4;t.StatsReporter=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new o.StatsListener(e);var n=l+(a-l)*Math.random();i.setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.includeStat=function(e){this.statsToReport_[e]=!0},e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},o=!1;r.forEach(t,function(t,i){i>0&&r.contains(e.statsToReport_,t)&&(n[t]=i,o=!0)}),o&&this.server_.reportStats(n),i.setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}()},zzcx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerActions=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}()}});